<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡¶¨‡¶æ‡¶∂‡¶ï‡¶æ‡¶®‡ßç‡¶¶‡¶ø | ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡ßü‡¶æ‡¶Æ ‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶® ‡¶∂‡¶™</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&family=Hind+Siliguri:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

    <style>
    /* Notice Modal Style */
    .notice-overlay {
        position: fixed; inset: 0; background: rgba(0,0,0,0.7); 
        backdrop-filter: blur(5px); z-index: 9999; 
        display: none; align-items: center; justify-content: center; padding: 20px;
    }
    .notice-box {
        background: white; border-radius: 25px; padding: 25px; 
        max-width: 400px; width: 100%; box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        text-align: center; animation: modalPop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    @keyframes modalPop { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    .notice-box i { font-size: 3rem; color: var(--p); margin-bottom: 15px; }
    .notice-box h2 { font-weight: 800; margin-bottom: 10px; color: var(--s); }
    .notice-box p { font-size: 0.9rem; color: #64748b; line-height: 1.6; margin-bottom: 20px; text-align: left; }
    .notice-btn { 
        width: 100%; padding: 15px; background: var(--s); color: white; 
        border: none; border-radius: 15px; font-weight: 800; cursor: pointer; 
    }

    :root { --p: #f59e0b; --s: #0f172a; --bg: #f3f4f6; --white: #ffffff; --danger: #ef4444; --success: #10b981; --info: #3b82f6; }
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Plus Jakarta Sans', 'Hind Siliguri', sans-serif; -webkit-tap-highlight-color: transparent; }
    body { background: var(--bg); color: var(--s); padding-bottom: 20px; overflow-x: hidden; }
    body.drawer-open { overflow: hidden; } /* ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶ì‡¶™‡ßá‡¶® ‡¶π‡¶≤‡ßá ‡¶¨‡¶°‡¶ø ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶≤‡¶ï */

    header { background: var(--white); padding: 16px 20px; display: flex; align-items: center; position: sticky; top: 0; z-index: 1000; box-shadow: 0 4px 15px rgba(0,0,0,0.05); gap: 12px; }
    .menu-trigger { font-size: 1.5rem; cursor: pointer; color: var(--s); }
    .logo-area { flex: 1; }
    .logo-area h1 { font-size: 1.5rem; font-weight: 800; letter-spacing: -1px; text-transform: uppercase; }
    .logo-area span { color: var(--p); }

    .drawer { 
        position: fixed; top: 0; left: -280px; width: 280px; height: 100%; 
        background: var(--white); z-index: 2000; transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
        border-radius: 0 30px 30px 0; display: flex; flex-direction: column;
    }
    .drawer.active { left: 0; box-shadow: 20px 0 60px rgba(0,0,0,0.1); }
    .drawer-header { padding: 30px 25px 10px; background: var(--white); border-bottom: 1px solid #eee; }
    
    .drawer-content { 
        padding: 25px 15px; flex-grow: 1; overflow-y: auto; 
        display: flex; flex-direction: column;
    }
    .drawer-item { 
        display: flex; align-items: center; padding: 15px 18px; 
        margin-bottom: 10px; border-radius: 15px; color: #475569; 
        font-weight: 700; cursor: pointer; transition: 0.3s; gap: 15px; 
        background: #f8fafc; border: 1px solid #f1f5f9; position: relative;
    }
    .drawer-item i { font-size: 1.2rem; color: var(--p); width: 25px; text-align: center; }
    
    .drawer-bottom { 
        margin-top: auto; padding-top: 15px; border-top: 1px solid #eee;
    }
    
    .notif-dot { position: absolute; top: 12px; right: 15px; width: 10px; height: 10px; background: var(--danger); border-radius: 50%; border: 2px solid white; display: none; }

    .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.3); backdrop-filter: blur(2px); z-index: 1500; display: none; }
    .overlay.active { display: block; }

    /* ‡¶∏‡ßç‡¶≤‡¶ø‡¶Æ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶®‡¶æ‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏‡¶° ‡¶¨‡ßú ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü */
    .banner-slider { 
        width: 100%; 
        height: 165px; /* ‡¶¨‡ßç‡¶Ø‡¶æ‡¶®‡¶æ‡¶∞‡¶ü‡¶ø ‡¶ö‡¶ø‡¶ï‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá */
        overflow: hidden; 
        position: relative; 
        margin: 0; 
    }

    .hero-banner {
        padding: 15px 20px; /* ‡¶™‡ßç‡¶Ø‡¶æ‡¶°‡¶ø‡¶Ç ‡¶ï‡¶Æ‡¶ø‡ßü‡ßá ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü‡¶ï‡ßá ‡¶ö‡¶ø‡¶ï‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶®‡¶æ‡¶∞‡ßá ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá */
        display: flex;
        flex-direction: column;
        justify-content: center;
        height: 100%;
    }

    .hero-banner h2 { 
        font-size: 1.8rem; /* ‡¶¨‡ßú ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶Ø‡¶æ ‡¶∏‡ßç‡¶≤‡¶ø‡¶Æ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶®‡¶æ‡¶∞‡ßá ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá */
        font-weight: 800; 
        line-height: 1; 
        margin-bottom: 4px;
        text-shadow: 0 2px 10px rgba(0,0,0,0.5); 
    }

    .hero-banner p { 
        font-size: 0.9rem; 
        opacity: 0.95; 
        font-weight: 600;
        text-shadow: 0 2px 6px rgba(0,0,0,0.5);
        margin: 0;
    }

    .banner-wrapper { display: flex; height: 100%; transition: transform 0.6s cubic-bezier(0.2, 1, 0.3, 1); }
    .hero-banner { min-width: 100%; height: 100%; padding: 20px 25px; color: white; display: flex; flex-direction: column; justify-content: center; position: relative; }
    .b1 { background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://images.unsplash.com/photo-1604719312566-8912e9227c6a?w=800'); background-size: cover; background-position: center; }
    .b2 { background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://images.unsplash.com/photo-1542838132-92c53300491e?w=800'); background-size: cover; background-position: center; }
    .b3 { background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://images.unsplash.com/photo-1615485290382-441e4d049cb5?w=800'); background-size: cover; background-position: center; }
    .hero-banner h2 { font-size: 1.3rem; font-weight: 800; line-height: 1.2; }
    .hero-banner p { font-size: 0.8rem; opacity: 0.9; margin-top: 5px; }
    
    /* --- ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßç‡¶∞‡¶´‡ßá‡¶∂‡¶®‡¶æ‡¶≤ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ --- */
    .pro-modal {
        position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 10000;
        display: none; align-items: flex-end; justify-content: center;
    }
    .pro-modal.active { display: flex; animation: slideUp 0.3s cubic-bezier(0.165, 0.84, 0.44, 1); }
    .pm-content {
        background: white; 
        width: 100%; 
        max-width: 500px; 
        max-height: 90vh; /* ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá‡¶∞ ‡ßØ‡ß¶% ‡¶â‡¶ö‡ßç‡¶ö‡¶§‡¶æ ‡¶®‡¶ø‡¶¨‡ßá */
        border-radius: 25px 25px 0 0; 
        overflow-y: auto; /* ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤‡¶ø‡¶Ç ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶ï‡¶∞‡¶¨‡ßá */
        padding: 20px; 
        position: relative;
        padding-bottom: 100px; /* ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ú‡¶æ‡ßü‡¶ó‡¶æ ‡¶∞‡¶æ‡¶ñ‡¶¨‡ßá */
        -webkit-overflow-scrolling: touch; /* ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤‡ßá ‡¶∏‡ßç‡¶Æ‡ßÅ‡¶• ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤‡¶ø‡¶Ç ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø */
    }

    .pm-img { width: 100%; height: 250px; object-fit: cover; border-radius: 20px; margin-bottom: 20px; }
    .pm-title { font-size: 1.4rem; font-weight: 800; color: #1e293b; line-height: 1.3; }
    .pm-price { font-size: 1.5rem; color: #ea580c; font-weight: 800; margin: 10px 0; }
    .pm-desc { font-size: 0.95rem; color: #64748b; line-height: 1.7; margin-bottom: 80px; white-space: pre-line; }
    .pm-bar {
        position: fixed; bottom: 0; left: 0; width: 100%; background: white;
        padding: 15px 20px; box-shadow: 0 -5px 20px rgba(0,0,0,0.05); z-index: 10001;
        display: flex; gap: 15px; align-items: center; justify-content: center;
    }
    .pm-btn {
        flex: 1; padding: 16px; border: none; border-radius: 16px; font-weight: 800; font-size: 1rem; cursor: pointer;
        background: #0f172a; color: white; display: flex; align-items: center; justify-content: center; gap: 10px;
        max-width: 460px;
    }
    .close-pm { 
        position: absolute; top: 20px; right: 20px; background: rgba(255,255,255,0.9); 
        width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center;
        font-size: 1.2rem; cursor: pointer; box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    /* ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü */
    .cat-scroll { 
        display: flex; gap: 12px; overflow-x: auto; padding-bottom: 10px; 
        scrollbar-width: none; -ms-overflow-style: none;
    }
    .cat-scroll::-webkit-scrollbar { display: none; }
    .cat-item { flex: 0 0 auto; text-align: center; width: 70px; cursor: pointer; }
    .cat-icon-box { 
        width: 55px; height: 55px; background: white; border-radius: 18px; 
        display: flex; align-items: center; justify-content: center; margin: 0 auto 8px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.03); border: 1px solid #f1f5f9; transition: 0.2s;
    }
    .cat-item.active .cat-icon-box { background: #0f172a; color: white; border-color: #0f172a; }
    .cat-item p { font-size: 0.75rem; font-weight: 700; color: #64748b; }

    /* ‡¶™‡ßç‡¶∞‡¶´‡ßá‡¶∂‡¶®‡¶æ‡¶≤ ‡¶ï‡¶Æ‡ßç‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü ‡¶ó‡ßç‡¶∞‡¶ø‡¶° ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® */
    .grid { 
        display: grid; 
        grid-template-columns: repeat(2, 1fr); 
        gap: 12px; 
        padding: 15px; 
        background: #fcfdfe;
        margin-top: -10px; /* ‡¶è‡¶ü‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶¨‡ßã‡¶∞‡ßç‡¶°‡¶ï‡ßá ‡¶â‡¶™‡¶∞‡ßá ‡¶§‡ßÅ‡¶≤‡¶¨‡ßá */
    }

    .card { 
        background: var(--white); 
        border-radius: 16px; 
        overflow: hidden; 
        border: 1px solid rgba(0,0,0,0.03); 
        display: flex; 
        flex-direction: column; 
        box-shadow: 0 10px 25px rgba(0,0,0,0.04); 
        transition: all 0.3s ease;
        height: 100%;
    }

    .card:active { 
        transform: scale(0.96); 
    }

    .card img { 
        width: 100%; 
        height: 160px; 
        object-fit: cover; 
        background: #f8fafc;
        transition: 0.3s ease;
    }

    .card-body { 
        padding: 12px; 
        display: flex; 
        flex-direction: column; 
        gap: 8px;
    }

    .card-body h4 { 
        font-size: 0.85rem; 
        font-weight: 700; 
        color: #334155; 
        line-height: 1.3; 
        height: 2.2rem; /* ‡¶´‡¶ø‡¶ï‡ßç‡¶∏‡¶° ‡¶π‡¶æ‡¶á‡¶ü ‡ß® ‡¶≤‡¶æ‡¶á‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø */
        overflow: hidden;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        margin-bottom: 8px;
    }

    .price-row { 
        display: flex; 
        justify-content: space-between; 
        align-items: center; 
        margin-top: auto;
    }

    .price-row b { 
        font-size: 1rem; 
        color: var(--p); 
        font-weight: 800;
    }

    /* ‡¶∏‡ßã‡¶≤‡ßç‡¶° ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ - ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶Ø‡¶º ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® */
    .sold-count {
        display: none; /* "‡¶ú‡¶® ‡¶ï‡¶ø‡¶®‡ßá‡¶õ‡ßá‡¶®" ‡¶≤‡ßá‡¶¨‡ßá‡¶≤ ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã */
    }

    .app-section { display: none; animation: fadeIn 0.4s ease; }
    .app-section.active { display: block; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    .inbox-container { padding: 5px; }
    .msg-list-item { background: white; border-radius: 15px; padding: 15px; margin-bottom: 10px; display: flex; align-items: center; gap: 15px; border: 1px solid #f1f5f9; cursor: pointer; transition: 0.2s; }
    .msg-list-item:active { transform: scale(0.98); background: #f8fafc; }
    .msg-list-icon { width: 40px; height: 40px; background: #fff7ed; color: var(--p); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.1rem; flex-shrink: 0; }
    .msg-list-info { flex: 1; overflow: hidden; }
    .msg-list-info h4 { font-size: 0.95rem; font-weight: 700; color: var(--s); margin-bottom: 2px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .msg-list-info span { font-size: 0.75rem; color: #94a3b8; }

    #msgDetailSec { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg); z-index: 3000; display: none; flex-direction: column; }
    #msgDetailSec.active { display: flex; animation: slideUp 0.3s ease-out; }
    @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
    
    .msg-detail-header { background: white; padding: 20px; display: flex; align-items: center; gap: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
    .msg-detail-body { flex: 1; padding: 20px; overflow-y: auto; }
    .msg-content-box { background: white; padding: 20px; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.02); border: 1px solid #f1f5f9; }
    .msg-content-box h2 { font-size: 1.2rem; font-weight: 800; color: var(--s); margin-bottom: 10px; border-bottom: 1px solid #f1f5f9; padding-bottom: 10px; }
    .msg-content-box p { font-size: 0.95rem; color: #475569; line-height: 1.7; white-space: pre-line; }

    .floating-cart { position: fixed; bottom: 50px; right: 20px; background: var(--s); color: white; width: 55px; height: 55px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.4rem; box-shadow: 0 8px 20px rgba(0,0,0,0.2); z-index: 1000; transition: 0.3s; }
    .f-badge { position: absolute; top: -2px; right: -2px; background: var(--p); color: black; font-size: 0.7rem; font-weight: 800; padding: 3px 7px; border-radius: 50%; border: 2px solid white; }
    
    .order-card { background: white; border-radius: 24px; padding: 20px; margin-bottom: 18px; border: 1px solid #eef2f6; box-shadow: 0 10px 30px rgba(0,0,0,0.04); position: relative; }
    .order-head-new { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
    .ord-num { font-size: 0.75rem; color: #94a3b8; font-weight: 700; background: #f8fafc; padding: 4px 10px; border-radius: 8px; }
    .ord-status-pill { font-size: 0.7rem; font-weight: 800; padding: 5px 12px; border-radius: 50px; text-transform: uppercase; letter-spacing: 0.5px; }
    .status-Pending { background: #fff7ed; color: #ea580c; }
    .status-Confirmed { background: #f0fdf4; color: #16a34a; }
    .status-Processing { background: #eff6ff; color: #2563eb; }
    .status-Cancelled { background: #fef2f2; color: #dc2626; }
    .status-Pending_Payment { background: #fef3c7; color: #d97706; }
    .status-Delivery_Progress { background: #dbeafe; color: #1d4ed8; }
    
    .ord-item-list { border-top: 1px solid #f1f5f9; padding-top: 12px; margin-bottom: 12px; display: flex; flex-direction: column; gap: 8px; }
    .ord-row { display: flex; align-items: center; gap: 12px; }
    .ord-img { width: 42px; height: 42px; border-radius: 12px; object-fit: cover; background: #f1f5f9; }
    .ord-info-box { flex: 1; }
    .ord-item-name { font-size: 0.85rem; font-weight: 700; color: var(--s); display: block; }
    .ord-item-qty { font-size: 0.75rem; color: #64748b; font-weight: 600; }
    
    .ord-summary-bar { background: #f8fafc; padding: 12px 15px; border-radius: 15px; display: flex; justify-content: space-between; align-items: center; }
    .ord-total-label { font-size: 0.75rem; color: #94a3b8; font-weight: 600; }
    .ord-total-val { font-size: 1.1rem; font-weight: 800; color: var(--s); }
    .ord-pay-method { font-size: 0.65rem; color: #64748b; display: block; margin-top: 3px; font-weight: 700; }
    .ord-date-stamp { font-size: 0.65rem; color: #cbd5e1; margin-top: 10px; display: block; text-align: right; }

    .input-style { width: 100%; padding: 15px; border-radius: 12px; border: 1.5px solid #eee; margin-top: 10px; font-size: 1rem; outline: none; }
    .btn-action { width: 100%; padding: 18px; background: var(--s); color: white; border: none; border-radius: 18px; font-weight: 800; margin-top: 15px; cursor: pointer; display: flex; justify-content: center; align-items: center; gap: 10px; }
    .btn-action:disabled { opacity: 0.7; cursor: not-allowed; }
    
    .uid-box { background: #f8fafc; padding: 10px; border-radius: 10px; border: 1px dashed #cbd5e1; margin-top: 15px; text-align: center; }
    .uid-box b { font-size: 0.9rem; color: var(--s); letter-spacing: 1px; }

    .pro-toast {
        position: fixed;
        top: -100px;
        left: 50%;
        transform: translateX(-50%);
        width: 90%;
        max-width: 350px;
        background: white;
        border-radius: 20px;
        padding: 12px 18px;
        display: flex;
        align-items: center; gap: 15px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); z-index: 4000;
        transition: 0.6s cubic-bezier(0.68, -0.6, 0.32, 1.6); border: 1px solid #eee;
    }
    .pro-toast.active { top: 20px; }
    .pro-toast-icon { width: 40px; height: 40px; background: var(--p); color: white; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; flex-shrink: 0; }
    
    .loader-spin { animation: spin 1s linear infinite; }
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

    .pay-box { background: white; padding: 20px; border-radius: 20px; border: 1px solid #eee; margin-top: 15px; }
    .pay-option { display: flex; align-items: center; gap: 10px; padding: 12px; border: 1.5px solid #f1f5f9; border-radius: 12px; margin-bottom: 10px; cursor: pointer; transition: 0.2s; }
    .pay-option.selected { border-color: var(--p); background: #fffbeb; }
    .pay-option i { color: var(--p); }

    .admin-num-box { background: #fff7ed; padding: 15px; border-radius: 15px; border: 1px dashed var(--p); margin-bottom: 20px; text-align: center; }
    .pay-method-chips { display: flex; gap: 10px; margin-bottom: 15px; justify-content: center; }
    .chip { padding: 8px 15px; border-radius: 10px; background: #f1f5f9; font-size: 0.8rem; font-weight: 700; cursor: pointer; }
    .chip.active { background: var(--p); color: white; }
    
    .back-btn { font-size: 1.1rem; cursor: pointer; margin-right: 10px; }

    #banScreen { position: fixed; inset: 0; background: white; z-index: 9999; display: none; flex-direction: column; align-items: center; justify-content: center; padding: 30px; text-align: center; }
    #banScreen i { font-size: 4rem; color: var(--danger); margin-bottom: 20px; }
    #banScreen h2 { font-weight: 800; color: var(--s); margin-bottom: 10px; }
    #banScreen p { color: #64748b; font-weight: 600; line-height: 1.6; }

    #adBannerContainer {
        position: fixed;
        bottom: -150px;
        left: 0;
        width: 100%;
        display: flex;
        justify-content: center;
        padding: 15px;
        z-index: 5000;
        transition: bottom 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    #adBannerContainer.show { bottom: 0; }

    .clickable-banner {
        text-decoration: none;
        position: relative;
        width: 350px;
        height: 65px;
        background: #000;
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        transition: transform 0.3s ease;
    }
    .clickable-banner:active { transform: scale(0.95); }
    .bg-animation {
        position: absolute;
        width: 200%;
        height: 200%;
        background: linear-gradient(45deg, #000 25%, #1a1a1a 50%, #000 75%);
        background-size: 50% 50%;
        animation: wave 4s linear infinite;
        z-index: 1;
    }
    @keyframes wave {
        0% { transform: translate(-25%, -25%) rotate(0deg); }
        100% { transform: translate(-25%, -25%) rotate(360deg); }
    }
    .clickable-banner::after {
        content: '';
        position: absolute;
        inset: 2px;
        background: rgba(0, 0, 0, 0.8);
        border-radius: 13px;
        z-index: 2;
    }
    .ad-content {
        position: relative;
        z-index: 3;
        display: flex;
        align-items: center;
        gap: 12px;
    }
    .ad-icon { font-size: 22px; animation: bounce 2s infinite; }
    @keyframes bounce {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.2); }
    }
    .ad-text { color: #fff; font-size: 16px; font-weight: 700; letter-spacing: 0.5px; font-family: 'Hind Siliguri', sans-serif; }
    .shine-effect {
        position: absolute;
        top: 0;
        left: -100%;
        width: 50%;
        height: 100%;
        background: linear-gradient(to right, transparent, rgba(255,255,255,0.2), transparent);
        transform: skewX(-25deg);
        animation: shine 3s infinite;
        z-index: 4;
    }
    @keyframes shine {
        0% { left: -100%; }
        100% { left: 150%; }
    }

    .chat-msg { margin-bottom: 12px; max-width: 85%; font-size: 0.9rem; line-height: 1.5; padding: 12px 16px; border-radius: 18px; position: relative; }
    .chat-msg.admin { align-self: flex-start; background: #f1f5f9; color: var(--s); border-radius: 18px 18px 18px 0; }
    .chat-msg.user { align-self: flex-end; background: var(--s); color: white; border-radius: 18px 18px 0 18px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
    .chat-time { font-size: 0.65rem; opacity: 0.6; display: block; margin-top: 5px; text-align: right; }
    
    /* Professional Customer Service UI */
    .service-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 15px;
        margin-top: 10px;
    }
    .contact-card {
        background: var(--white);
        padding: 20px;
        border-radius: 20px;
        display: flex;
        align-items: center;
        gap: 15px;
        text-decoration: none;
        transition: 0.3s;
        border: 1px solid #f1f5f9;
        box-shadow: 0 4px 10px rgba(0,0,0,0.02);
    }
    .contact-card:active { transform: scale(0.97); }
    .contact-icon {
        width: 50px;
        height: 50px;
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
    }
    .icon-wa { background: #e8faf0; color: #10b981; }
    .icon-call { background: #eff6ff; color: #3b82f6; }
    .icon-map { background: #fff7ed; color: #f59e0b; }

    .contact-info h4 { font-size: 1rem; font-weight: 800; color: var(--s); margin-bottom: 2px; }
    .contact-info p { font-size: 0.8rem; color: #64748b; font-weight: 500; }

    .live-chat-preview {
        background: var(--s);
        border-radius: 24px;
        padding: 25px;
        margin-top: 25px;
        color: white;
        position: relative;
        overflow: hidden;
    }
    .live-chat-preview::after {
        content: '';
        position: absolute;
        right: -20px;
        bottom: -20px;
        width: 100px;
        height: 100px;
        background: rgba(255,255,255,0.05);
        border-radius: 50%;
    }

    body.modal-open {
        overflow: hidden; /* ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤‡¶ø‡¶Ç ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶¨‡ßá */
        height: 100vh;
    }

    @keyframes pulse {
        0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); }
        70% { box-shadow: 0 0 0 10px rgba(16, 185, 129, 0); }
        100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
    }
    </style>
</head>
<body>
<div id="staticPageModal" class="notice-overlay" style="display:none;">
    <div class="notice-box" style="max-height: 85vh; overflow-y: auto; text-align: left;">
        <h2 id="staticTitle" style="color:var(--s); margin-bottom:15px; text-align: center;"></h2>
        <div id="staticContent" style="font-size: 0.9rem; line-height: 1.6; color: #475569; white-space: pre-line;">
            ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...
        </div>
        <button onclick="closeStaticPage()" class="notice-btn" style="margin-top:20px;">‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®</button>
    </div>
</div>

<div id="proModal" class="pro-modal">
    <div class="pm-content">
        <div class="close-pm" onclick="closeProModal()"><i class="fas fa-times"></i></div>
        <img src="" id="pmImg" class="pm-img">
        <h2 id="pmName" class="pm-title"></h2>
        <div id="pmPrice" class="pm-price"></div>
        <h4 style="font-size:0.9rem; font-weight:800; color:#94a3b8; margin-bottom:5px;">‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§:</h4>
        <p id="pmDesc" class="pm-desc"></p>
        <hr style="border: 0; border-top: 1px solid #eee; margin: 15px 0;">
        <div style="display: flex; gap: 10px; margin-bottom: 20px;">
            <button onclick="contactAdminForProduct()" style="flex: 1; padding: 12px; border-radius: 12px; border: 1px solid #0f172a; background: transparent; color: #0f172a; font-weight: 700; font-size: 0.8rem;">
                <i class="fab fa-whatsapp"></i> ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶ï‡¶•‡¶æ ‡¶¨‡¶≤‡ßÅ‡¶®
            </button>
            <button onclick="showCommentBox()" style="flex: 1; padding: 12px; border-radius: 12px; border: 1px solid #64748b; background: transparent; color: #64748b; font-weight: 700; font-size: 0.8rem;">
                <i class="far fa-comment-dots"></i> ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶ï‡¶∞‡ßÅ‡¶®
            </button>
        </div>

        <div id="commentBox" style="display:none; margin-bottom: 80px;">
            <textarea id="userComment" class="input-style" placeholder="‡¶™‡¶£‡ßç‡¶Ø‡¶ü‡¶ø ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..." style="height: 80px;"></textarea>
            <button onclick="submitComment()" class="btn-action" style="padding: 10px; font-size: 0.8rem; margin-top: 10px;">‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </div>
        <div id="commentsDisplay" style="margin-top: 20px; border-top: 1px solid #eee; padding-top: 15px; margin-bottom: 80px;">
            <h4 style="font-size:0.9rem; font-weight:800; color:#1e293b; margin-bottom:10px;">‡¶ï‡ßç‡¶∞‡ßá‡¶§‡¶æ‡¶¶‡ßá‡¶∞ ‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§:</h4>
            <div id="commentsList" style="display: flex; flex-direction: column; gap: 10px;">
                <p style="font-size: 0.8rem; color: #94a3b8;">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
            </div>
        </div>
    </div>
    <div class="pm-bar">
        <button id="pmAddBtn" class="pm-btn" onclick="addToCartFromModal()">
            <i class="fas fa-shopping-bag"></i> ‡¶ï‡¶æ‡¶∞‡ßç‡¶ü‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
        </button>
    </div>
</div>

<!-- ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶Æ‡¶°‡¶æ‡¶≤ ‡¶∏‡¶∞‡¶æ‡¶®‡ßã ‡¶π‡ßü‡ßá‡¶õ‡ßá -->

<div id="adBannerContainer">
    <a href="#" id="adLink" class="clickable-banner">
        <div class="bg-animation"></div>
        <div class="shine-effect"></div>
        <div class="ad-content">
            <span class="ad-icon">üõçÔ∏è</span>
            <span class="ad-text" id="dynamicAdText">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</span>
        </div>
    </a>
</div>

<div id="banScreen">
    <i class="fas fa-user-slash"></i>
    <h2>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá</h2>
    <p>‡¶¶‡ßÅ‡¶É‡¶ñ‡¶ø‡¶§, ‡¶®‡¶ø‡ßü‡¶Æ ‡¶≠‡¶ô‡ßç‡¶ó ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶è‡¶á ‡¶Ü‡¶á‡¶°‡¶ø‡¶ü‡¶ø ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶ú‡¶æ‡¶®‡¶§‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
    <div class="uid-box" style="margin-top:20px; width:100%;">
        <span style="font-size: 0.7rem; color: #94a3b8; display: block; margin-bottom: 5px;">‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø:</span>
        <b id="bannedUid">---</b>
    </div>
</div>

<div id="toast" class="pro-toast">
    <div class="pro-toast-icon" id="toastIcon"><i class="fas fa-bell"></i></div>
    <div class="pro-toast-info">
        <h5 id="toastTitle" style="font-size:0.9rem; font-weight:800;">‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®</h5>
        <p id="toastMsg" style="font-size:0.75rem; color:#64748b;">‡¶®‡¶§‡ßÅ‡¶® ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶è‡¶∏‡ßá‡¶õ‡ßá!</p>
    </div>
</div>

<div class="overlay" id="overlay" onclick="toggleDrawer()"></div>

<div class="drawer" id="drawer">
    <div class="drawer-header"><h3 style="font-weight:800;">‡¶Æ‡ßá‡¶®‡ßÅ ‡¶Ö‡¶™‡¶∂‡¶®</h3></div>
    <div class="drawer-content">
  
        <div class="drawer-item" onclick="showSec('home'); toggleDrawer()"><i class="fas fa-house"></i> ‡¶π‡ßã‡¶Æ ‡¶™‡ßá‡¶ú</div>
        <div class="drawer-item" onclick="showSec('inbox'); toggleDrawer()">
            <i class="fas fa-envelope"></i> ‡¶á‡¶®‡¶¨‡¶ï‡ßç‡¶∏ (‡¶Æ‡ßá‡¶∏‡ßá‡¶ú)
            <div id="inboxDot" class="notif-dot"></div>
        </div>
        <div class="drawer-item" onclick="showSec('history'); toggleDrawer()"><i class="fas fa-history"></i> ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø</div>
        <div class="drawer-item" onclick="showSec('profile'); toggleDrawer()"><i class="fas fa-user-gear"></i> ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</div>
        <div class="drawer-item" onclick="showSec('customer_service'); toggleDrawer()"><i class="fas fa-headset"></i> ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏</div>
        <div class="drawer-item" onclick="showSec('settings'); toggleDrawer()">
    <i class="fas fa-cog"></i> ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏
</div>

<!-- ‡¶™‡ßÅ‡¶∞‡¶®‡ßã ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶∞‡¶ø‡¶Æ‡ßÅ‡¶≠ ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá -->
<!-- ‡¶è‡¶á ‡¶≤‡¶æ‡¶á‡¶®‡¶ó‡ßÅ‡¶≤‡ßã ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡ßã: -->
<!-- <div class="drawer-item" onclick="showSec('profile'); toggleDrawer()"><i class="fas fa-user-gear"></i> ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</div> -->
<!-- <div class="drawer-item" onclick="showStaticPage('privacy_policy'); toggleDrawer()"><i class="fas fa-user-shield"></i> ‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶≠‡ßá‡¶∏‡¶ø ‡¶™‡¶≤‡¶ø‡¶∏‡¶ø</div> -->
        <div class="drawer-bottom">
            <div class="drawer-item" onclick="showStaticPage('order_guide'); toggleDrawer()">
                <i class="fas fa-shopping-bag"></i> ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨‡ßá‡¶®
            </div>
            <div class="drawer-item" onclick="showStaticPage('privacy_policy'); toggleDrawer()">
                <i class="fas fa-user-shield"></i> ‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶≠‡ßá‡¶∏‡¶ø ‡¶™‡¶≤‡¶ø‡¶∏‡¶ø
            </div>
        </div>
    </div>
</div>

<!-- ‡¶≤‡¶æ‡¶á‡¶® 45: -->
<header id="mainHeader">
    <div class="menu-trigger" onclick="toggleDrawer()"><i class="fas fa-bars-staggered"></i></div>
    <div class="logo-area"><h1>‡¶Ü‡¶≤<span>‡¶¨‡¶æ‡¶∞‡¶æ‡¶ï‡¶æ</span></h1></div>
</header>

<!-- ‡¶≤‡¶æ‡¶á‡¶® 260-261: -->
<title>‡¶Ü‡¶≤ ‡¶¨‡¶æ‡¶∞‡¶æ‡¶ï‡¶æ | ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡ßü‡¶æ‡¶Æ ‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶® ‡¶∂‡¶™</title>

<section id="home" class="app-section active">
    <div class="banner-slider">
        <div class="banner-wrapper" id="bannerWrapper">
            <div class="hero-banner b1"><h2>‡¶¨‡¶æ‡¶∂‡¶ï‡¶æ‡¶®‡ßç‡¶¶‡¶ø ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡ßü‡¶æ‡¶Æ ‡¶∂‡¶™</h2><p>‡¶∏‡ßá‡¶∞‡¶æ ‡¶Æ‡¶æ‡¶®‡ßá‡¶∞ ‡¶™‡¶£‡ßç‡¶Ø ‡¶è‡¶ñ‡¶® ‡¶π‡¶æ‡¶§‡ßá‡¶∞ ‡¶®‡¶æ‡¶ó‡¶æ‡¶≤‡ßá</p></div>
            <div class="hero-banner b2"><h2>‡¶∏‡ßá‡¶∞‡¶æ ‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶∏‡¶Æ‡¶æ‡¶π‡¶æ‡¶∞</h2><p>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ü‡¶∏‡ßç‡¶•‡¶æ‡¶∞ ‡¶∏‡¶†‡¶ø‡¶ï ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ</p></div>
            <div class="hero-banner b3"><h2>‡¶¨‡¶ø‡¶∂‡ßÅ‡¶¶‡ßç‡¶ß‡¶§‡¶æ‡¶∞ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡ßü‡¶§‡¶æ</h2><p>‡¶™‡ßç‡¶∞‡¶æ‡¶ï‡ßÉ‡¶§‡¶ø‡¶ï ‡¶ì ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø‡¶ï‡¶∞ ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞</p></div>
        </div>
    </div>
    <div style="padding: 15px; background: #fff; position: relative; z-index: 50;">
    <div id="searchWrapper" style="display: flex; align-items: center; background: #f8fafc; border: 1.5px solid #e2e8f0; border-radius: 14px; padding: 2px 15px; transition: 0.3s;">
        <i class="fas fa-search" id="searchIcon" style="color: #94a3b8;"></i>
        <input type="text" id="productSearch" 
            onfocus="showTrendingBoard()" 
            oninput="searchInsideBoardOnly()" 
            placeholder="‡¶™‡¶£‡ßç‡¶Ø ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®..." 
            style="width: 100%; padding: 12px; border: none; background: transparent; outline: none; font-size: 1rem; font-family: 'Hind Siliguri';">
        <i class="fas fa-times-circle" id="closeBoardBtn" onclick="hideTrendingBoard()" style="display: none; color: #cbd5e1; cursor: pointer; font-size: 1.2rem;"></i>
    </div>

    <div id="trendingPopupBoard" style="display: none; position: absolute; top: 75px; left: 15px; right: 15px; background: #fff; border-radius: 20px; box-shadow: 0 25px 60px rgba(0,0,0,0.25); border: 1px solid #f1f5f9; z-index: 5000; overflow: hidden; animation: slideDown 0.3s ease;">
        <div style="background: #10b981; padding: 12px 18px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center;">
            <span style="font-family: 'Hind Siliguri'; font-weight: 700; color: white; font-size: 0.9rem;">
                <i class="fas fa-search" style="font-size: 0.8rem; margin-right: 5px;"></i> Searching
            </span>
            <span onclick="hideTrendingBoard()" style="color: #e0f2f1; font-size: 0.8rem; cursor: pointer; font-family: 'Hind Siliguri';">‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®</span>
        </div>
        <div id="boardProductArea" style="max-height: 400px; min-height: 220px; overflow-y: auto; background: #fcfcfc; padding: 12px;">
            </div>
    </div>
</div>

    <div style="padding: 12px 15px 5px; background: #fff; margin-bottom: 8px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
        <h3 style="font-size: 1rem; font-weight: 800; color: #1e293b; font-family: 'Hind Siliguri', sans-serif; margin: 0;">‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø</h3>
        
        <button onclick="toggleCategories()" id="catToggleBtn" style="background: #f1f5f9; border: none; padding: 5px 12px; border-radius: 8px; font-size: 0.8rem; font-weight: 700; color: #1e293b; cursor: pointer; display: flex; align-items: center; gap: 5px;">
            <i class="fas fa-eye"></i> ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®
        </button>
    </div>
    
    <div id="dynamicCatList" class="cat-scroll" style="display: none;">
        </div>
</div>

    </div>

    <div style="padding: 15px 12px 5px;">
        <h3 style="font-weight: 800; font-size: 1.1rem; margin-top: -8px; margin-bottom: 12px; padding-left: 10px; color: #1e293b;">‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶™‡¶£‡ßç‡¶Ø‡¶∏‡¶Æ‡ßÇ‡¶π</h3>
        <div class="grid" id="productGrid">
            <!-- ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶ó‡ßç‡¶∞‡¶ø‡¶° ‡¶°‡¶æ‡¶á‡¶®‡¶æ‡¶Æ‡¶ø‡¶ï ‡¶≤‡ßã‡¶° ‡¶π‡¶¨‡ßá -->
        </div>
    </div>
</section>

<section id="inbox" class="app-section" style="padding: 20px 12px;">
    <h2 style="margin-bottom: 20px; font-weight: 800; display: flex; align-items: center; gap: 10px;">
        <i class="fas fa-comment-dots" style="color:var(--p)"></i> ‡¶á‡¶®‡¶¨‡¶ï‡ßç‡¶∏
    </h2>
    <div id="messageList" class="inbox-container"></div>
    <div id="emptyInbox" style="text-align:center; margin-top:80px; color:#94a3b8;">
        <i class="fas fa-envelope-open" style="font-size: 3rem; opacity: 0.3; margin-bottom: 10px;"></i>
        <p>‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶®‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶®‡ßá‡¶á</p> 
    </div>
</section>
<section id="settings" class="app-section" style="padding: 20px 15px;">
    <h2 style="margin-bottom: 25px; font-weight: 800; display: flex; align-items: center; gap: 10px;">
        <i class="fas fa-cog" style="color: var(--p);"></i> ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏
    </h2>
    
    <!-- ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶∏‡ßá‡¶ï‡¶∂‡¶® -->
    <div style="background: white; padding: 25px; border-radius: 30px; border: 1px solid #eee; margin-bottom: 20px;">
        <h3 style="font-size: 1rem; font-weight: 800; color: #1e293b; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
            <i class="fas fa-sliders-h" style="color: var(--p);"></i> ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏
        </h3>
        
        <!-- ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ - ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶™‡ßá‡¶ú‡ßá ‡¶®‡¶ø‡¶Ø‡¶º‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá -->
        <div class="drawer-item" onclick="showSec('profile'); toggleDrawer()" style="margin-bottom: 10px; cursor: pointer;">
            <i class="fas fa-user-gear"></i> ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏
        </div>
        
        <!-- ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨‡ßá‡¶® -->
        <div class="drawer-item" onclick="showStaticPage('order_guide')" style="margin-bottom: 10px; cursor: pointer;">
            <i class="fas fa-shopping-bag"></i> ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨‡ßá‡¶®
        </div>
        
        <!-- ‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶≠‡ßá‡¶∏‡¶ø ‡¶™‡¶≤‡¶ø‡¶∏‡¶ø -->
        <div class="drawer-item" onclick="showStaticPage('privacy_policy')" style="margin-bottom: 10px; cursor: pointer;">
            <i class="fas fa-user-shield"></i> ‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶≠‡ßá‡¶∏‡¶ø ‡¶™‡¶≤‡¶ø‡¶∏‡¶ø
        </div>
        
        <!-- ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá -->
        <div class="drawer-item" onclick="showStaticPage('about_us')" style="cursor: pointer;">
            <i class="fas fa-info-circle"></i> ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá
        </div>
    </div>
    
    <!-- ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶á‡¶®‡¶´‡ßã -->
    <div style="background: #f8fafc; padding: 20px; border-radius: 20px; border: 1px dashed #cbd5e1; text-align: center;">
        <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 15px;">
            <div style="width: 50px; height: 50px; background: linear-gradient(135deg, var(--p), #f97316); border-radius: 15px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-shopping-bag" style="color: white; font-size: 1.5rem;"></i>
            </div>
        </div>
        
        <div style="color: #94a3b8; font-size: 0.8rem; line-height: 1.4;">
            <p style="font-weight: 700; color: #64748b; margin-bottom: 5px;">‡¶≠‡¶æ‡¶∞‡ßç‡¶∏‡¶® 1.0.0</p>
            <p>¬© 2024. ‡¶∏‡¶∞‡ßç‡¶¨‡¶∏‡ßç‡¶¨‡¶§‡ßç‡¶¨ ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§</p>
            <p style="margin-top: 5px; font-size: 0.75rem;">‡¶∂‡ßÅ‡¶¶‡ßç‡¶ß‡¶§‡¶æ, ‡¶¨‡¶ø‡¶∂‡ßÅ‡¶¶‡ßç‡¶ß‡¶§‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡¶∏‡ßç‡¶§‡¶§‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶∂‡ßç‡¶∞‡ßÅ‡¶§‡¶ø</p>
        </div>
    </div>
</section>

<style>
/* ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶™‡ßá‡¶ú‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
.drawer-item {
    display: flex;
    align-items: center;
    padding: 15px 18px;
    margin-bottom: 8px;
    border-radius: 15px;
    color: #475569;
    font-weight: 700;
    cursor: pointer;
    transition: 0.3s;
    gap: 15px;
    background: #f8fafc;
    border: 1px solid #f1f5f9;
}

.drawer-item:active {
    transform: scale(0.98);
    background: #f1f5f9;
}

.drawer-item:hover {
    border-color: var(--p);
    background: #fff7ed;
}

.drawer-item i {
    font-size: 1.1rem;
    color: var(--p);
    width: 25px;
    text-align: center;
}
</style>

<script>
// ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶ø‡¶ï ‡¶™‡ßá‡¶ú ‡¶∂‡ßã ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
function showStaticPage(type) {
    const modal = document.getElementById('staticPageModal');
    modal.style.display = 'flex';
    
    let title = '';
    
    switch(type) {
        case 'order_guide':
            title = '‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨‡ßá‡¶®';
            break;
        case 'privacy_policy':
            title = '‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶≠‡ßá‡¶∏‡¶ø ‡¶™‡¶≤‡¶ø‡¶∏‡¶ø';
            break;
        case 'about_us':
            title = '‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá';
            break;
        default:
            title = '‡¶™‡ßÉ‡¶∑‡ßç‡¶†‡¶æ';
    }
    
    document.getElementById('staticTitle').innerText = title;
    
    db.ref('settings/' + type).once('value')
        .then(snap => {
            const content = snap.val() || `
                <div style="text-align: center; padding: 40px 20px;">
                    <i class="fas fa-file-alt" style="font-size: 3rem; color: #94a3b8; opacity: 0.3; margin-bottom: 15px;"></i>
                    <p style="color: #64748b; font-weight: 600;">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶è‡¶ñ‡¶®‡ßã ‡¶è‡¶á ‡¶™‡ßÉ‡¶∑‡ßç‡¶†‡¶æ‡¶∞ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßá‡¶®‡¶®‡¶ø‡•§</p>
                    <p style="color: #94a3b8; font-size: 0.9rem; margin-top: 10px;">‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶Ü‡¶∏‡¶õ‡ßá...</p>
                </div>
            `;
            document.getElementById('staticContent').innerHTML = content;
        })
        .catch(error => {
            document.getElementById('staticContent').innerHTML = `
                <div style="padding: 30px 20px; text-align: center;">
                    <i class="fas fa-exclamation-triangle" style="font-size: 2rem; color: #ef4444; margin-bottom: 15px;"></i>
                    <p style="color: #ef4444; font-weight: 600;">‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ</p>
                    <p style="color: #64748b; font-size: 0.9rem;">${error.message}</p>
                </div>
            `;
        });
}


<script>
// ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
function updateProfile() {
    const name = document.getElementById('setting_name').value;
    const email = document.getElementById('setting_email').value;
    const phone = document.getElementById('setting_phone').value;
    const address = document.getElementById('setting_address').value;
    
    if(!name || !email || !phone || !address) {
        showToast("‡¶≠‡ßÅ‡¶≤", "‡¶∏‡¶¨‡¶ó‡ßÅ‡¶≤‡ßã ‡¶ò‡¶∞ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®!", "danger");
        return;
    }
    
    const updatedUser = {
        ...currentUser,
        name,
        email,
        phone,
        address,
        updatedAt: new Date().toLocaleString('bn-BD')
    };
    
    // Firebase-‡¶è ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
    db.ref('users/' + userId).update(updatedUser)
        .then(() => {
            // ‡¶≤‡¶ï‡¶æ‡¶≤ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
            localStorage.setItem('current_user', JSON.stringify(updatedUser));
            currentUser = updatedUser;
            
            // ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶ú‡¶æ‡ßü‡¶ó‡¶æ‡ßü ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
            if(document.getElementById('pNameDisp')) {
                document.getElementById('pNameDisp').innerText = name;
                document.getElementById('pPhoneDisp').innerText = phone;
            }
            
            showToast("‡¶∏‡¶´‡¶≤", "‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶∏‡¶´‡¶≤ ‡¶π‡ßü‡ßá‡¶õ‡ßá!", "success");
        })
        .catch(error => {
            showToast("‡¶≠‡ßÅ‡¶≤", "‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ: " + error.message, "danger");
        });
}
</script>

<section id="msgDetailSec">
    <div class="msg-detail-header">
        <div onclick="closeMsgDetail()" style="cursor:pointer; font-size:1.2rem; color:var(--s);"><i class="fas fa-arrow-left"></i></div>
        <h3 style="font-weight:800; font-size: 1.1rem;">‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶°‡¶ø‡¶ü‡ßá‡¶á‡¶≤‡¶∏</h3>
    </div>
    <div class="msg-detail-body" id="msgDetailBody"></div>
</section>

<section id="cart" class="app-section" style="padding: 20px 12px;">
    <h2 style="margin-bottom: 20px; font-weight: 800;">‡¶∂‡ßÅ‡¶™‡¶ø‡¶Ç ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ó</h2>
    <div id="cartItemsList"></div>
    <div id="cartSummary" style="display: none; margin-top: 20px;">
        <div style="background: white; padding: 20px; border-radius: 20px; border: 1px solid #eee;">
            <div style="display:flex; justify-content:space-between; font-weight: 600; font-size: 0.9rem; margin-bottom: 10px;">
                <span>‡¶™‡¶£‡ßç‡¶Ø ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø:</span><span id="subTotal">‡ß≥‡ß¶</span>
            </div>
            <div style="display:flex; justify-content:space-between; font-weight: 600; font-size: 0.9rem; margin-bottom: 10px;">
                <span>‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶ö‡¶æ‡¶∞‡ßç‡¶ú:</span><span id="deliveryCharge">‡ß≥‡ß¨‡ß¶</span>
            </div>
            <div style="display:flex; justify-content:space-between; font-weight: 800; font-size: 1.1rem; border-top: 1px dashed #ddd; padding-top: 10px; margin-top: 5px;">
                <span>‡¶∏‡¶∞‡ßç‡¶¨‡¶Æ‡ßã‡¶ü:</span><span id="grandTotal" style="color:var(--p);">‡ß≥‡ß¨‡ß¶</span>
            </div>
        </div>
        <button class="btn-action" onclick="showSec('checkout')">‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶ß‡¶æ‡¶™‡ßá ‡¶Ø‡¶æ‡¶® <i class="fas fa-arrow-right"></i></button>
    </div>
    <div id="emptyCart" style="text-align:center; margin-top:100px; color:#94a3b8;">
        <i class="fas fa-shopping-bag" style="font-size: 4rem; opacity: 0.2; margin-bottom: 15px;"></i>
        <p style="font-weight:700;">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ó‡¶ü‡¶ø ‡¶ñ‡¶æ‡¶≤‡¶ø!</p>
    </div>
</section>

<section id="checkout" class="app-section" style="padding: 20px 12px;">
    <div style="display:flex; align-items:center; margin-bottom:20px;">
        <div onclick="showSec('cart')" class="back-btn"><i class="fas fa-arrow-left"></i></div>
        <h2 style="font-weight: 800;">‡¶∂‡¶ø‡¶™‡¶ø‡¶Ç ‡¶°‡¶ø‡¶ü‡ßá‡¶á‡¶≤‡¶∏</h2>
    </div>
    
    <div style="background: white; padding: 20px; border-radius: 24px; border: 1px solid #eee;">
        <div style="margin-bottom: 15px;">
            <label style="font-size:0.75rem; font-weight:800; color:#64748b; text-transform:uppercase;">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ</label>
            <input type="text" id="uName" class="input-style" placeholder="‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®">
        </div>
        <div style="margin-bottom: 15px;">
            <label style="font-size:0.75rem; font-weight:800; color:#64748b; text-transform:uppercase;">‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞</label>
            <input type="tel" id="uPhone" class="input-style" placeholder="‡ßß‡ßß ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡ßá‡¶∞ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞">
        </div>
        <div style="margin-bottom: 15px;">
            <label style="font-size:0.75rem; font-weight:800; color:#64748b; text-transform:uppercase;">‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ</label>
            <input type="text" id="uAddress" class="input-style" placeholder="‡¶¨‡¶æ‡¶∏‡¶æ ‡¶®‡¶Ç, ‡¶∞‡ßã‡¶°, ‡¶è‡¶≤‡¶æ‡¶ï‡¶æ...">
        </div>
    </div>

    <button class="btn-action" onclick="goToPayment()">‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ß‡¶æ‡¶™‡ßá ‡¶Ø‡¶æ‡¶® <i class="fas fa-wallet"></i></button>
</section>

<section id="payment_page" class="app-section" style="padding: 20px 12px;">
    <div style="display:flex; align-items:center; margin-bottom:20px;">
        <div onclick="showSec('checkout')" class="back-btn"><i class="fas fa-arrow-left"></i></div>
        <h2 style="font-weight: 800;">‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø</h2>
    </div>

    <div class="pay-box">
        <label style="font-size:0.75rem; font-weight:800; color:#64748b; text-transform:uppercase; margin-bottom: 15px; display:block;">‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßá‡¶•‡¶° ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</label>
        
        <div class="pay-option selected" id="opt-cod" onclick="selectPay('cod')">
            <i class="fas fa-truck-fast"></i>
            <div style="flex:1;"><b style="font-size:0.9rem;">‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶Ö‡¶® ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø</b><br><small style="color:#64748b;">‡¶™‡¶£‡ßç‡¶Ø ‡¶π‡¶æ‡¶§‡ßá ‡¶™‡ßá‡ßü‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶¶‡¶ø‡¶®</small></div>
            <i class="fas fa-check-circle" id="check-cod"></i>
        </div>

        <div class="pay-option" id="opt-manual" onclick="selectPay('manual')">
            <i class="fas fa-wallet"></i>
            <div style="flex:1;"><b style="font-size:0.9rem;">‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßÅ‡¶Ø‡¶º‡¶æ‡¶≤ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü</b><br><small style="color:#64748b;">‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂, ‡¶®‡¶ó‡¶¶ ‡¶¨‡¶æ ‡¶∞‡¶ï‡ßá‡¶ü‡ßá ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü</small></div>
            <i class="far fa-circle" id="check-manual"></i>
        </div>
    </div>

    <button id="placeOrderBtn" class="btn-action" onclick="handlePaymentNext()">‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶ß‡¶æ‡¶™‡ßá ‡¶Ø‡¶æ‡¶® <i class="fas fa-arrow-right"></i></button>
</section>

<section id="manual_payment_page" class="app-section" style="padding: 20px 12px;">
    <div style="display:flex; align-items:center; margin-bottom:20px;">
        <div onclick="showSec('payment_page')" class="back-btn"><i class="fas fa-arrow-left"></i></div>
        <h2 style="font-weight: 800;">‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßÅ‡ßü‡¶æ‡¶≤ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü</h2>
    </div>

    <div class="pay-box">
        <div id="manualPayDetails">
            <!-- ‡¶¨‡¶ø‡¶≠‡¶ø‡¶®‡ßç‡¶® ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßá‡¶•‡¶°‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ -->
            <div id="bkashBox" class="admin-num-box" style="display:block;">
                <span style="font-size:0.7rem; font-weight:800; color:#ea580c; display:block; margin-bottom:5px;">‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞</span>
                <b style="font-size: 1.3rem; letter-spacing: 1px;" id="bkashPhoneDisp">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</b>
                <small style="display:block; margin-top:5px; color:#64748b; font-size:0.7rem;">Personal</small>
            </div>
            
            <div id="nagadBox" class="admin-num-box" style="display:none;">
                <span style="font-size:0.7rem; font-weight:800; color:#ea580c; display:block; margin-bottom:5px;">‡¶®‡¶ó‡¶¶ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞</span>
                <b style="font-size: 1.3rem; letter-spacing: 1px;" id="nagadPhoneDisp">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</b>
                <small style="display:block; margin-top:5px; color:#64748b; font-size:0.7rem;">Personal</small>
            </div>
            
            <div id="rocketBox" class="admin-num-box" style="display:none;">
                <span style="font-size:0.7rem; font-weight:800; color:#ea580c; display:block; margin-bottom:5px;">‡¶∞‡¶ï‡ßá‡¶ü ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞</span>
                <b style="font-size: 1.3rem; letter-spacing: 1px;" id="rocketPhoneDisp">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</b>
                <small style="display:block; margin-top:5px; color:#64748b; font-size:0.7rem;">Personal</small>
            </div>
            
            <div class="pay-method-chips">
                <div class="chip active" id="chip-bkash" onclick="setChip('bkash')">Bkash</div>
                <div class="chip" id="chip-nagad" onclick="setChip('nagad')">Nagad</div>
                <div class="chip" id="chip-rocket" onclick="setChip('rocket')">Rocket</div>
            </div>

            <div style="margin-bottom: 12px;">
                <label style="font-size:0.7rem; font-weight:800; color:#64748b;">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßá‡¶∞‡¶ï ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞</label>
                <input type="tel" id="senderNum" class="input-style" style="margin-top:5px; padding:12px;" placeholder="‡¶Ø‡ßá ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶™‡¶æ‡¶†‡¶ø‡ßü‡ßá‡¶õ‡ßá‡¶® (‡ß¶‡ßß‡ß≠XXXXXXXX)" required>
                <small style="color:#94a3b8; font-size:0.65rem; display:block; margin-top:3px;">‡¶ü‡¶æ‡¶ï‡¶æ ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ø‡ßá ‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®</small>
            </div>
            <div>
                <label style="font-size:0.7rem; font-weight:800; color:#64748b;">Transaction ID (TrxID)</label>
                <input type="text" id="trxId" class="input-style" style="margin-top:5px; padding:12px;" placeholder="‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßç‡¶≤‡¶ø‡¶™‡ßá‡¶∞ TrxID ‡¶¶‡¶ø‡¶®" required>
                <small style="color:#94a3b8; font-size:0.65rem; display:block; margin-top:3px;">‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂/‡¶®‡¶ó‡¶¶/‡¶∞‡¶ï‡ßá‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶•‡ßá‡¶ï‡ßá ‡¶™‡¶æ‡¶ì‡ßü‡¶æ TrxID</small>
            </div>
            <div style="margin-top: 15px; padding: 12px; background: #f0fdf4; border-radius: 10px; border: 1px solid #bbf7d0;">
                <p style="font-size:0.75rem; color:#166534; margin:0; text-align:center;">
                    <i class="fas fa-info-circle"></i> ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶™‡¶∞ ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶Ü‡¶á‡¶°‡¶ø ‡¶è‡¶¨‡¶Ç ‡¶™‡ßç‡¶∞‡ßá‡¶∞‡¶ï ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶∏‡¶†‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶¶‡¶ø‡¶®
                </p>
            </div>
        </div>
    </div>

    <button id="manualConfirmBtn" class="btn-action" onclick="placeOrder()">
        <i class="fas fa-check-circle"></i> ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®
    </button>
</section>

<section id="history" class="app-section" style="padding: 20px 12px;">
    <h2 style="margin-bottom: 20px; font-weight: 800;">‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø</h2>
    <div id="historyList"></div>
</section>

<section id="profile" class="app-section" style="padding: 20px 12px;">
    <h2 style="margin-bottom: 25px; font-weight: 800;">‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</h2>
    <div style="background: white; padding: 25px; border-radius: 30px; border: 1px solid #eee; text-align: center;">
        <div style="width: 80px; height: 80px; background: #f1f5f9; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 15px; font-size: 2rem; color: var(--p);">
            <i class="fas fa-user"></i>
        </div>
        <h3 id="pNameDisp" style="font-weight: 800;">‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞</h3>
        <p id="pPhoneDisp" style="color: #64748b; font-size: 0.9rem; font-weight: 600;">‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá</p>
        
        <div class="uid-box">
            <span style="font-size: 0.7rem; color: #94a3b8; display: block; margin-bottom: 5px;">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶â‡¶®‡¶ø‡¶ï ‡¶Ü‡¶á‡¶°‡¶ø (UID)</span>
            <b id="displayUid">---</b>
        </div>
    </div>
    
    <div style="margin-top: 20px; background: white; padding: 20px; border-radius: 24px; border: 1px solid #eee;">
        <h4 style="font-size: 0.8rem; font-weight: 800; color: #64748b; text-transform: uppercase; margin-bottom: 15px;">‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</h4>
        
        <div style="margin-bottom: 12px; text-align:left;">
            <label style="font-size:0.7rem; font-weight:800; color:#64748b;">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ</label>
            <input type="text" id="profName" class="input-style" style="padding:10px; font-size:0.9rem;" placeholder="‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶®‡¶æ‡¶Æ">
        </div>
        <div style="margin-bottom: 12px; text-align:left;">
            <label style="font-size:0.7rem; font-weight:800; color:#64748b;">‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞</label>
            <input type="tel" id="profPhone" class="input-style" style="padding:10px; font-size:0.9rem;" placeholder="‡ßß‡ßß ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü">
        </div>
        <div style="margin-bottom: 12px; text-align:left;">
            <label style="font-size:0.7rem; font-weight:800; color:#64748b;">‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ</label>
            <input type="text" id="profAddr" class="input-style" style="padding:10px; font-size:0.9rem;" placeholder="‡¶¨‡¶æ‡¶∏‡¶æ, ‡¶∞‡ßã‡¶°, ‡¶è‡¶≤‡¶æ‡¶ï‡¶æ.")
        </div>
        <button class="btn-action" style="padding:12px; font-size:0.9rem;" onclick="saveProfile()">‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
    </div>
</section>

<section id="customer_service" class="app-section" style="padding: 20px 15px;">
    <h2 style="margin-bottom: 20px; font-weight: 800; font-size: 1.4rem;">
        ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®? <span style="color:var(--p)">‡¶¨‡¶≤‡ßÅ‡¶®‡•§</span>
    </h2>

    <div class="service-grid">
        <a id="waLink" href="#" target="_blank" class="contact-card">
            <div class="contact-icon icon-wa"><i class="fab fa-whatsapp"></i></div>
            <div class="contact-info">
                <h4>‡¶π‡ßã‡ßü‡¶æ‡¶ü‡¶∏‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü</h4>
                <p>‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®</p>
            </div>
            <i class="fas fa-chevron-right" style="margin-left:auto; color:#cbd5e1;"></i>
        </a>

        <a id="callLink" href="#" class="contact-card">
            <div class="contact-icon icon-call"><i class="fas fa-phone-alt"></i></div>
            <div class="contact-info">
                <h4>‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶ï‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®</h4>
                <p>‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶®‡¶ø‡¶ß‡¶ø ‡¶ï‡¶•‡¶æ ‡¶¨‡¶≤‡¶¨‡ßá</p>
            </div>
            <i class="fas fa-chevron-right" style="margin-left:auto; color:#cbd5e1;"></i>
        </a>

        <div class="contact-card">
            <div class="contact-icon icon-map"><i class="fas fa-location-dot"></i></div>
            <div class="contact-info">
                <h4>‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶Ö‡¶´‡¶ø‡¶∏</h4>
                <p id="displayAddress">‡¶¢‡¶æ‡¶ï‡¶æ, ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂</p>
            </div>
        </div>
    </div>

    <div class="live-chat-preview">
        <h3 style="font-weight: 800; margin-bottom: 8px;">‡ß®‡ß™/‡ß≠ ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ‡¶æ‡¶∞ ‡¶ï‡ßá‡ßü‡¶æ‡¶∞</h3>
        <p style="font-size: 0.85rem; opacity: 0.8; line-height: 1.5; margin-bottom: 15px;">
            ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶™‡¶£‡ßç‡¶Ø ‡¶¨‡¶æ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶®‡¶ø‡ßü‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó ‡¶¨‡¶æ ‡¶ú‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶∏‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßç‡¶¨‡¶ø‡¶ß‡¶æ‡ßü ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶®‡ßç‡¶§‡ßÅ‡¶∑‡ßç‡¶ü‡¶ø ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶Æ‡ßÇ‡¶≤ ‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø‡•§
        </p>
        <div style="display: flex; align-items: center; gap: 8px;">
            <span style="width: 8px; height: 8px; background: #10b981; border-radius: 50%; display: inline-block; animation: pulse 2s infinite;"></span>
            <span style="font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px;">Online Now</span>
        </div>
    </div>
</section>
<section id="auth_sec" class="app-section" style="padding: 20px;">
    <div id="login_form" style="background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05);">
        <h2 style="font-weight: 800; margin-bottom: 20px; text-align: center;">‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
        <input type="email" id="login_email" class="input-style" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤">
        <input type="password" id="login_pass" class="input-style" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°">
        <button onclick="handleLogin()" class="btn-action">‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        <p style="text-align: center; margin-top: 15px; font-size: 0.9rem; color: #64748b;">
            ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶®‡ßá‡¶á? <span onclick="toggleAuthForms()" style="color: var(--p); font-weight: 700; cursor: pointer;">‡¶®‡¶§‡ßÅ‡¶® ‡¶ñ‡ßÅ‡¶≤‡ßÅ‡¶®</span>
        </p>
    </div>

    <div id="signup_form" style="display: none; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05);">
        <h2 style="font-weight: 800; margin-bottom: 20px; text-align: center;">‡¶®‡¶§‡ßÅ‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü</h2>
        <input type="text" id="reg_name" class="input-style" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ">
        <input type="email" id="reg_email" class="input-style" placeholder="‡¶á‡¶Æ‡ßá‡¶á‡¶≤ (‡¶≤‡¶ó‡¶á‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)">
        <input type="password" id="reg_pass" class="input-style" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°">
        <input type="email" id="reg_contact_email" class="input-style" placeholder="‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó‡ßá‡¶∞ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤">
        <input type="tel" id="reg_phone" class="input-style" placeholder="‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞">
        <textarea id="reg_address" class="input-style" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ" style="height: 80px;"></textarea>
        <button onclick="handleSignup()" class="btn-action">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        <p style="text-align: center; margin-top: 15px; font-size: 0.9rem; color: #64748b;">
            ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Ü‡¶õ‡ßá? <span onclick="toggleAuthForms()" style="color: var(--p); font-weight: 700; cursor: pointer;">‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</span>
        </p>
    </div>
</section>


<a href="#" class="floating-cart" id="floatCart" onclick="showSec('cart')">
    <i class="fas fa-shopping-bag"></i>
    <div class="f-badge" id="cartBadge">0</div>
</a>

<script>
    const config = {
        apiKey: "AIzaSyBdPXCZBkr-CLi4KigcyzlXBRUT14ony54",
        databaseURL: "https://tornament-bc970-default-rtdb.firebaseio.com",
        projectId: "tornament-bc970",
    };
    firebase.initializeApp(config);
    const db = firebase.database();

    let userId = localStorage.getItem('sky_uid');
    if(!userId) {
        userId = 'UID' + Math.floor(100000 + Math.random() * 900000);
        localStorage.setItem('sky_uid', userId);
    }

    let cart = JSON.parse(localStorage.getItem('sky_cart')) || [];
    let deliveryCost = 60;
    let selectedPayment = 'cod';
    let selectedChip = 'bkash';
    let currentModalProduct = null;
    let currentCategory = 'all';

    function toggleDrawer() {
        const drawer = document.getElementById('drawer');
        const overlay = document.getElementById('overlay');
        const isActive = drawer.classList.contains('active');
        
        drawer.classList.toggle('active');
        overlay.classList.toggle('active');
        document.body.classList.toggle('drawer-open', !isActive);
    }
     
    function showSec(id) {
        document.querySelectorAll('.app-section').forEach(s => s.classList.remove('active'));
        const section = document.getElementById(id);
        if(section) section.classList.add('active');
        document.getElementById('mainHeader').style.display = (id === 'msgDetailSec') ? 'none' : 'flex';
        document.getElementById('floatCart').style.display = (['cart', 'checkout', 'payment_page', 'manual_payment_page', 'msgDetailSec', 'customer_service'].includes(id)) ? 'none' : 'flex';
        window.scrollTo(0,0);
        if(id === 'history') loadHistory();
        if(id === 'customer_service') listenChat();
    }
function showSec(id) {
    // ‡¶Ø‡¶¶‡¶ø ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶¨‡¶æ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶™‡ßá‡¶ú‡ßá ‡¶Ø‡ßá‡¶§‡ßá ‡¶ö‡¶æ‡ßü ‡¶è‡¶¨‡¶Ç ‡¶≤‡¶ó‡¶á‡¶® ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡ßá
    if((id === 'profile' || id === 'checkout') && !currentUser) {
        alert("‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶ó‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶¨‡¶æ ‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®");
        id = 'authSec'; // ‡¶≤‡¶ó‡¶á‡¶® ‡¶™‡ßá‡¶ú‡ßá ‡¶™‡¶æ‡¶†‡¶ø‡ßü‡ßá ‡¶¶‡ßá‡¶¨‡ßá
    }
    
    // ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡¶Æ‡¶æ‡¶® showSec ‡¶ï‡ßã‡¶°‡¶ü‡ßÅ‡¶ï‡ßÅ ‡¶®‡¶ø‡¶ö‡ßá ‡¶•‡¶æ‡¶ï‡¶¨‡ßá...
    document.querySelectorAll('.app-section').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
}

    // ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
    db.ref('categories').on('value', snap => {
        const div = document.getElementById('dynamicCatList');
        let html = `
            <div class="cat-item ${currentCategory === 'all' ? 'active' : ''}" onclick="filterCategory('all', this)">
                <div class="cat-icon-box"><i class="fas fa-th-large"></i></div>
                <p>‡¶∏‡¶¨‡¶ó‡ßÅ‡¶≤‡ßã</p>
            </div>`;
        
        snap.forEach(c => {
            const cat = c.val();
            html += `
            <div class="cat-item ${currentCategory === cat.name ? 'active' : ''}" onclick="filterCategory('${cat.name}', this)">
                <div class="cat-icon-box"><i class="${cat.icon || 'fas fa-box'}"></i></div>
                <p>${cat.name}</p>
            </div>`;
        });
        
        // ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá
        html += `
            <div class="cat-item" onclick="filterCategory('‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞ ‡¶ì ‡¶´‡¶≤‡¶Æ‡ßÇ‡¶≤', this)">
                <div class="cat-icon-box"><i class="fas fa-utensils"></i></div>
                <p>‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞ ‡¶ì ‡¶´‡¶≤‡¶Æ‡ßÇ‡¶≤</p>
            </div>
            <div class="cat-item" onclick="filterCategory('‡¶ß‡¶∞‡ßç‡¶Æ‡ßÄ‡¶Ø‡¶º ‡¶ú‡¶ø‡¶®‡¶ø‡¶∏‡¶™‡¶§‡ßç‡¶∞', this)">
                <div class="cat-icon-box"><i class="fas fa-praying-hands"></i></div>
                <p>‡¶ß‡¶∞‡ßç‡¶Æ‡ßÄ‡¶Ø‡¶º ‡¶ú‡¶ø‡¶®‡¶ø‡¶∏‡¶™‡¶§‡ßç‡¶∞</p>
            </div>
            <div class="cat-item" onclick="filterCategory('‡¶ß‡¶∞‡ßç‡¶Æ‡ßÄ‡¶Ø‡¶º ‡¶¨‡¶á ‡¶ì ‡¶ï‡¶ø‡¶§‡¶æ‡¶¨', this)">
                <div class="cat-icon-box"><i class="fas fa-book-quran"></i></div>
                <p>‡¶ß‡¶∞‡ßç‡¶Æ‡ßÄ‡¶Ø‡¶º ‡¶¨‡¶á ‡¶ì ‡¶ï‡¶ø‡¶§‡¶æ‡¶¨</p>
            </div>
            <div class="cat-item" onclick="filterCategory('‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º ‡¶∏‡¶æ‡¶Æ‡¶ó‡ßç‡¶∞‡ßÄ', this)">
                <div class="cat-icon-box"><i class="fas fa-boxes"></i></div>
                <p>‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º ‡¶∏‡¶æ‡¶Æ‡¶ó‡ßç‡¶∞‡ßÄ</p>
            </div>
        `;
        
        div.innerHTML = html;
    });

    // ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
    let allProducts = [];

    function fetchLiveProducts() {
        db.ref('products').on('value', snap => {
            allProducts = [];
            snap.forEach(c => {
                allProducts.push({ key: c.key, ...c.val() });
            });
            renderProducts(allProducts);
        });
        
        db.ref('settings/deliveryCharge').on('value', s => deliveryCost = s.val() || 60);
        
        // ‡¶¨‡¶ø‡¶≠‡¶ø‡¶®‡ßç‡¶® ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßá‡¶•‡¶°‡ßá‡¶∞ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶≤‡ßã‡¶°
        db.ref('settings').on('value', s => {
            const settings = s.val();
            if(settings) {
                document.getElementById('bkashPhoneDisp').innerText = settings.bkash || "‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...";
                document.getElementById('nagadPhoneDisp').innerText = settings.nagad || "‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...";
                document.getElementById('rocketPhoneDisp').innerText = settings.rocket || "‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...";
            }
        });
    }

    // ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® - ‡¶Ü‡¶™‡¶°‡ßá‡¶ü‡ßá‡¶°: ‡¶∏‡¶†‡¶ø‡¶ï ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã
    function renderProducts(list) {
        let html = '';
        list.forEach(p => {
            // "‡¶ú‡¶® ‡¶ï‡¶ø‡¶®‡ßá‡¶õ‡ßá‡¶®" ‡¶≤‡ßá‡¶¨‡ßá‡¶≤ ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá
            html += `
            <div class="card" onclick="openProModal('${p.key}', '${p.n}', ${p.p}, '${p.img}', \`${p.d || ''}\`)">
                <img src="${p.img}">
                <div class="card-body">
                    <h4>${p.n}</h4>
                    <!-- sold-count div removed -->
                    <div class="price-row">
                        <b>‡ß≥${p.p}</b>
                    </div>
                </div>
            </div>`;
        });
        document.getElementById('productGrid').innerHTML = html;
    }

    // ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞
    function filterCategory(catName, elem) {
        showSec('home');
        currentCategory = catName;
        
        // UI Active Class Change
        document.querySelectorAll('.cat-item').forEach(x => x.classList.remove('active'));
        if(elem) elem.classList.add('active');
        
        if(catName === 'all') {
            renderProducts(allProducts);
        } else {
            const filtered = allProducts.filter(p => 
                p.n.toLowerCase().includes(catName.toLowerCase()) || 
                (p.d && p.d.includes(catName)) ||
                (p.category && p.category === catName)
            );
            renderProducts(filtered);
        }
    }

    // ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶ø‡¶ï ‡¶™‡ßá‡¶ú ‡¶∂‡ßã ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® - ‡¶Ü‡¶™‡¶°‡ßá‡¶ü‡ßá‡¶°: ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶ï‡ßç‡¶≤‡ßã‡¶ú ‡¶π‡¶¨‡ßá
    function showStaticPage(type) {
        const modal = document.getElementById('staticPageModal');
        const title = document.getElementById('staticTitle');
        const content = document.getElementById('staticContent');
        
        modal.style.display = 'flex';
        toggleDrawer(); // ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶ï‡ßç‡¶≤‡ßã‡¶ú ‡¶π‡¶¨‡ßá

        if(type === 'order_guide') {
            title.innerText = "‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶ø‡¶ï‡¶æ";
            db.ref('settings/order_guide').on('value', snap => {
                content.innerHTML = snap.val() || "‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶è‡¶ñ‡¶®‡ßã ‡¶ï‡ßã‡¶®‡ßã ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßá‡¶®‡¶ø‡•§";
            });
        } else if(type === 'privacy_policy') {
            title.innerText = "‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶≠‡ßá‡¶∏‡¶ø ‡¶™‡¶≤‡¶ø‡¶∏‡¶ø";
            db.ref('settings/privacy_policy').on('value', snap => {
                content.innerHTML = snap.val() || "‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶è‡¶ñ‡¶®‡ßã ‡¶ï‡ßã‡¶®‡ßã ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßá‡¶®‡¶ø‡•§";
            });
        }
    }

    function closeStaticPage() {
        document.getElementById('staticPageModal').style.display = 'none';
    }

    // ‡¶Æ‡ßã‡¶°‡¶æ‡¶≤ ‡¶ì‡¶™‡ßá‡¶® ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    function openProModal(key, name, price, img, desc) {
        const commList = document.getElementById('commentsList');
        db.ref('product_comments/' + key).on('value', snap => {
            let html = '';
            if(snap.exists()){
                snap.forEach(c => {
                    const comm = c.val();
                    html += `
                    <div style="background: #f8fafc; padding: 10px; border-radius: 12px; border: 1px solid #f1f5f9;">
                        <b style="font-size: 0.8rem; color: #0f172a; display: block;">${comm.name}</b>
                        <p style="font-size: 0.85rem; color: #475569; margin: 3px 0;">${comm.text}</p>
                        <small style="font-size: 0.65rem; color: #94a3b8;">${comm.time}</small>
                    </div>`;
                });
            } else {
                html = '<p style="font-size: 0.8rem; color: #94a3b8;">‡¶è‡¶ñ‡¶®‡ßã ‡¶ï‡ßã‡¶®‡ßã ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶®‡ßá‡¶á‡•§ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø‡¶ü‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶π‡ßã‡¶ï!</p>';
            }
            commList.innerHTML = html;
        });
        
        currentModalProduct = { key, name, price, img, desc };
        document.getElementById('pmImg').src = img;
        document.getElementById('pmName').innerText = name;
        document.getElementById('pmPrice').innerText = '‡ß≥' + price;
        document.getElementById('pmDesc').innerText = desc || "‡¶è‡¶á ‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶ï‡ßã‡¶®‡ßã ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü‡¶®‡¶ø‡•§";
        
        document.body.classList.add('modal-open');
        document.getElementById('proModal').classList.add('active');
        document.getElementById('commentBox').style.display = 'none';
    }

    function closeProModal() {
        currentModalProduct = null;
        document.getElementById('proModal').classList.remove('active');
        document.body.classList.remove('modal-open');
    }

    // ‡¶Æ‡ßã‡¶°‡¶æ‡¶≤ ‡¶•‡ßá‡¶ï‡ßá ‡¶ï‡¶æ‡¶∞‡ßç‡¶ü‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    function addToCartFromModal() {
        if (!currentModalProduct) return;
        if(!currentUser) {
    showSec('authSec');
    return;
}

        
        const { key, name, price, img } = currentModalProduct;
        
        const existingIndex = cart.findIndex(item => item.key === key);
        
        if (existingIndex !== -1) {
            cart[existingIndex].qty += 1;
        } else {
            cart.push({
                key,
                name,
                price,
                img,
                qty: 1
            });
        }
        
        updateCartUI();
        closeProModal();
        showToast("‡¶∏‡¶´‡¶≤", `${name} ‡¶ï‡¶æ‡¶∞‡ßç‡¶ü‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!`, "success");
    }

    function contactAdminForProduct() {
        const productName = document.getElementById('pmName').innerText;
        const waLink = document.getElementById('waLink').href;
        
        if (waLink && waLink.includes('wa.me')) {
            const message = `‡¶Ü‡¶∏‡¶∏‡¶æ‡¶≤‡¶æ‡¶Æ‡ßÅ ‡¶Ü‡¶≤‡¶æ‡¶á‡¶ï‡ßÅ‡¶Æ, ‡¶Ü‡¶Æ‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∂‡¶™ ‡¶•‡ßá‡¶ï‡ßá ‡¶è‡¶á ‡¶™‡¶£‡ßç‡¶Ø‡¶ü‡¶ø ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá ‡¶ú‡¶æ‡¶®‡¶§‡ßá ‡¶ö‡¶æ‡¶á: ${productName}`;
            const finalUrl = `${waLink}?text=${encodeURIComponent(message)}`;
            window.open(finalUrl, '_blank');
        } else {
            alert("‡¶π‡ßã‡ßü‡¶æ‡¶ü‡¶∏‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§ ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏‡ßá‡¶∞ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞‡¶ü‡¶ø ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
        }
    }

    function showCommentBox() {
        const box = document.getElementById('commentBox');
        box.style.display = box.style.display === 'none' ? 'block' : 'none';
        box.scrollIntoView({ behavior: 'smooth' });
    }

    function submitComment() {
        const commentText = document.getElementById('userComment').value;
        const userName = document.getElementById('uName').value || "‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ ‡¶ï‡ßç‡¶∞‡ßá‡¶§‡¶æ";
        
        if(!commentText) return showToast("‡¶≠‡ßÅ‡¶≤", "‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®", "danger");
        if(!currentModalProduct) return;

        const commentData = {
            name: userName,
            text: commentText,
            time: new Date().toLocaleString('bn-BD'),
            uid: userId
        };

        db.ref('product_comments/' + currentModalProduct.key).push(commentData).then(() => {
            showToast("‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶", "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø‡¶ü‡¶ø ‡¶∏‡¶¨‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂‡¶ø‡¶§ ‡¶π‡ßü‡ßá‡¶õ‡ßá", "success");
            document.getElementById('userComment').value = '';
        });
    }

    function updateCartUI() {
        const list = document.getElementById('cartItemsList');
        const badge = document.getElementById('cartBadge');
        const summary = document.getElementById('cartSummary');
        const empty = document.getElementById('emptyCart');
        
        localStorage.setItem('sky_cart', JSON.stringify(cart));
        badge.innerText = cart.reduce((a, b) => a + b.qty, 0);
        
        if(cart.length === 0) {
            list.innerHTML = ''; summary.style.display = 'none'; empty.style.display = 'block'; return;
        }

        empty.style.display = 'none'; summary.style.display = 'block';
        let html = '', sub = 0;
        cart.forEach((item, idx) => {
            sub += (item.price * item.qty);
            html += `
                <div style="background:white; padding:15px; border-radius:20px; margin-bottom:12px; display:flex; align-items:center; gap:15px; border:1px solid #eee;">
                    <img src="${item.img}" style="width:55px; height:55px; border-radius:12px; object-fit:cover;">
                    <div style="flex:1;">
                        <h4 style="font-size:0.85rem; margin-bottom:3px;">${item.name}</h4>
                        <b style="font-size:0.95rem;">‡ß≥${item.price * item.qty}</b>
                    </div>
                    <div style="display:flex; gap:8px; align-items:center;">
                        <button style="padding:8px; border-radius:8px; background:#f1f5f9; border:none;" onclick="decreaseQty(${idx})">-</button>
                        <div style="font-weight:800;">${item.qty}</div>
                        <button style="padding:8px; border-radius:8px; background:#f1f5f9; border:none;" onclick="increaseQty(${idx})">+</button>
                    </div>
                </div>
            `;
        });
        document.getElementById('subTotal').innerText = '‡ß≥' + sub;
        document.getElementById('grandTotal').innerText = '‡ß≥' + (sub + deliveryCost);
        list.innerHTML = html;
    }

    function increaseQty(i) { cart[i].qty++; updateCartUI(); }
    function decreaseQty(i) { cart[i].qty--; if(cart[i].qty <= 0) cart.splice(i,1); updateCartUI(); }

    function goToPayment() { showSec('payment_page'); }
    function selectPay(p) {
        selectedPayment = p;
        document.getElementById('opt-cod').classList.toggle('selected', p === 'cod');
        document.getElementById('opt-manual').classList.toggle('selected', p === 'manual');
    }
    function setChip(c) { 
        selectedChip = c; 
        document.querySelectorAll('.chip').forEach(x => x.classList.remove('active')); 
        document.getElementById('chip-'+c).classList.add('active'); 
        
        // Show corresponding payment number box
        document.getElementById('bkashBox').style.display = c === 'bkash' ? 'block' : 'none';
        document.getElementById('nagadBox').style.display = c === 'nagad' ? 'block' : 'none';
        document.getElementById('rocketBox').style.display = c === 'rocket' ? 'block' : 'none';
    }

    function saveProfile() {
        const name = document.getElementById('profName').value;
        const phone = document.getElementById('profPhone').value;
        const addr = document.getElementById('profAddr').value;
        localStorage.setItem('bashkandi_user', JSON.stringify({ name, phone, addr }));
        document.getElementById('pNameDisp').innerText = name || "‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞";
        document.getElementById('pPhoneDisp').innerText = phone || "";
        showToast("‡¶∏‡¶´‡¶≤", "‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá", "success");
    }

    function handlePaymentNext() {
        if(selectedPayment === 'manual') showSec('manual_payment_page'); else placeOrder();
    }

    function placeOrder() {
        const name = document.getElementById('uName').value;
        const phone = document.getElementById('uPhone').value;
        const addr = document.getElementById('uAddress').value;
        const btn = (selectedPayment === 'manual') ? document.getElementById('manualConfirmBtn') : document.getElementById('placeOrderBtn');

        if(!name || !phone || !addr) return showToast("‡¶≠‡ßÅ‡¶≤", "‡¶∂‡¶ø‡¶™‡¶ø‡¶Ç ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®", "danger");

        let payData = { 
            type: selectedPayment === 'manual' ? 'Manual Payment' : 'Cash on Delivery', 
            method: selectedPayment,
            via: selectedPayment === 'manual' ? selectedChip : null
        };
        
        if(selectedPayment === 'manual') {
            const sNum = document.getElementById('senderNum').value;
            const trx = document.getElementById('trxId').value;
            
            // Validation
            if(!sNum || sNum.length !== 11 || !sNum.startsWith('01')) {
                return showToast("‡¶≠‡ßÅ‡¶≤", "‡¶∏‡¶†‡¶ø‡¶ï ‡ßß‡ßß ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡ßá‡¶∞‡¶ï ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡¶ø‡¶®", "danger");
            }
            if(!trx || trx.trim() === '') {
                return showToast("‡¶≠‡ßÅ‡¶≤", "‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶Ü‡¶á‡¶°‡¶ø (TrxID) ‡¶¶‡¶ø‡¶®", "danger");
            }
            
            // Complete payment data for manual payment
            payData.senderNumber = sNum; 
            payData.trxId = trx; 
            payData.via = selectedChip;
            payData.amount = cart.reduce((a,b) => a + (b.price * b.qty), 0) + deliveryCost;
            payData.paymentStatus = 'pending_verification'; // New status for admin verification
        }

        btn.disabled = true;
        btn.innerHTML = '<i class="fas fa-circle-notch loader-spin"></i> ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏‡¶ø‡¶Ç...';

        const order = {
            deviceId: userId, 
            name, 
            phone, 
            address: addr, 
            items: cart,
            total: cart.reduce((a,b) => a + (b.price * b.qty), 0) + deliveryCost,
            status: selectedPayment === 'manual' ? 'Pending_Payment' : 'Pending',
            payment: payData, 
            date: new Date().toLocaleString('bn-BD'),
            timestamp: Date.now(),
            paymentVerified: selectedPayment === 'manual' ? false : true
        };

        db.ref('orders').push(order).then((ref) => {
            const orderId = ref.key;
            
            // If manual payment, create a payment record for admin verification
            if(selectedPayment === 'manual') {
                const paymentRecord = {
                    orderId: orderId,
                    userId: userId,
                    userName: name,
                    userPhone: phone,
                    amount: order.total,
                    senderNumber: payData.senderNumber,
                    trxId: payData.trxId,
                    paymentMethod: selectedChip,
                    status: 'pending_verification',
                    timestamp: Date.now(),
                    orderDate: order.date
                };
                
                db.ref('manual_payments').push(paymentRecord);
            }
            
            localStorage.setItem('bashkandi_user', JSON.stringify({name, phone, addr}));
            localStorage.removeItem('sky_cart'); 
            cart = [];
            showToast("‡¶∏‡¶´‡¶≤", "‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡¶´‡¶≤ ‡¶π‡ßü‡ßá‡¶õ‡ßá! ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶æ‡¶á ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ ‡¶π‡¶¨‡ßá‡•§", "success");
            setTimeout(() => {
                showSec('home');
                btn.disabled = false;
                btn.innerHTML = '<i class="fas fa-check-circle"></i> ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®';
            }, 2000);
        }).catch((error) => {
            showToast("‡¶≠‡ßÅ‡¶≤", "‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá: " + error.message, "danger");
            btn.disabled = false;
            btn.innerHTML = '<i class="fas fa-check-circle"></i> ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®';
        });
    }

    function listenInbox() {
        db.ref('inbox/' + userId).on('value', snap => {
            let html = '', count = 0;
            const unreadMessages = [];
            
            snap.forEach(c => {
                const m = c.val();
                const isRead = m.read || false;
                
                if (!isRead) {
                    count++;
                    unreadMessages.push(c.key);
                }
                
                html = `
                    <div class="msg-list-item" onclick="openMsgDetail('${m.title}', '${m.text}', '${m.time}', '${c.key}')">
                        <div class="msg-list-icon"><i class="fas fa-envelope"></i></div>
                        <div class="msg-list-info">
                            <h4>${m.title}</h4>
                            <span><i class="far fa-clock"></i> ${m.time}</span>
                        </div>
                        <i class="fas fa-chevron-right" style="color:#cbd5e1; font-size:0.8rem;"></i>
                    </div>
                ` + html;
            });
            
            if(count > 0) {
                document.getElementById('inboxDot').style.display = 'block';
                localStorage.setItem('unread_messages', JSON.stringify(unreadMessages));
            } else {
                document.getElementById('inboxDot').style.display = 'none';
                localStorage.removeItem('unread_messages');
            }
            
            if(html) {
                document.getElementById('messageList').innerHTML = html;
                document.getElementById('emptyInbox').style.display = 'none';
            } else {
                document.getElementById('messageList').innerHTML = '';
                document.getElementById('emptyInbox').style.display = 'block';
            }
        });
    }

    // ‡¶Ü‡¶™‡¶°‡ßá‡¶ü‡ßá‡¶° ‡¶á‡¶®‡¶¨‡¶ï‡ßç‡¶∏ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®: ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡ßú‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá ‡¶ö‡¶ø‡¶π‡ßç‡¶®‡¶ø‡¶§ ‡¶ï‡¶∞‡¶æ
    function openMsgDetail(title, text, time, msgId) {
        // ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡ßú‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá ‡¶ö‡¶ø‡¶π‡ßç‡¶®‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®
        if (msgId) {
            db.ref('inbox/' + userId + '/' + msgId).update({ read: true });
        }
        
        document.getElementById('msgDetailBody').innerHTML = `
            <div class="msg-content-box">
                <h2>${title}</h2>
                <p>${text}</p>
                <div style="margin-top:20px; font-size:0.7rem; color:#94a3b8; font-weight:700; text-align:right;">
                    ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂‡¶ø‡¶§: ${time}
                </div>
            </div>
        `;
        document.getElementById('msgDetailSec').classList.add('active');
    }

    function closeMsgDetail() {
        document.getElementById('msgDetailSec').classList.remove('active');
    }

    function checkBanStatus() {
        db.ref('settings/blockedUsers/' + userId).on('value', snap => {
            if(snap.val() === true) {
                document.getElementById('banScreen').style.display = 'flex';
                document.getElementById('bannedUid').innerText = userId;
            }
        });
    }

    function showToast(title, msg, type) {
        const t = document.getElementById('toast');
        document.getElementById('toastTitle').innerText = title;
        document.getElementById('toastMsg').innerText = msg;
        document.getElementById('toastIcon').style.background = (type === 'success') ? '#10b981' : '#ef4444';
        t.classList.add('active');
        setTimeout(() => t.classList.remove('active'), 3000);
    }

    // ‡¶∏‡¶ø‡¶Æ‡ßç‡¶™‡¶≤ ‡¶è‡¶° ‡¶∂‡ßã ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶¨‡ßá ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§)
function startAdShow() {
    db.ref('adBanner').on('value', snap => {
        const ad = snap.val();
        const container = document.getElementById('adBannerContainer');
        
        // ‡¶Ø‡¶¶‡¶ø ‡¶ï‡ßã‡¶®‡ßã ‡¶è‡¶° ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡ßá ‡¶¨‡¶æ ‡¶è‡¶ï‡¶ü‡¶ø‡¶≠ ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡ßá, ‡¶§‡¶æ‡¶π‡¶≤‡ßá ‡¶∂‡ßã ‡¶ï‡¶∞‡¶¨‡ßá ‡¶®‡¶æ
        if (!ad || ad.status !== 'active') {
            container.classList.remove('show');
            return;
        }
        
        // ‡¶Ü‡¶ú‡¶ï‡ßá ‡¶è‡¶á ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶π‡ßü‡ßá‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡¶æ ‡¶ö‡ßá‡¶ï
        const today = new Date().toISOString().split('T')[0]; // YYYY-MM-DD
        const adShownKey = `ad_shown_${ad.timestamp}_${today}`;
        const hasSeenToday = localStorage.getItem(adShownKey) === 'true';
        
        // ‡¶ü‡¶æ‡¶∞‡ßç‡¶ó‡ßá‡¶ü ‡¶ö‡ßá‡¶ï
        let canShow = false;
        
        if (ad.target === 'all') {
            canShow = true;
        } else if (ad.target === 'single' && ad.uid === userId) {
            canShow = true;
        } else if (ad.target === 'new') {
            // ‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶¶‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø (‡ß®‡ß™ ‡¶ò‡¶£‡ßç‡¶ü‡¶æ‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá)
            const userAge = Date.now() - (parseInt(userId.replace('UID', '')) || Date.now());
            const hoursOld = userAge / (1000 * 60 * 60);
            canShow = hoursOld < 24;
        }
        
        // ‡¶∂‡¶ø‡¶°‡¶ø‡¶â‡¶≤ ‡¶ü‡¶æ‡¶á‡¶Æ ‡¶ö‡ßá‡¶ï
        if (ad.scheduleTime) {
            const now = new Date();
            const [scheduledHour, scheduledMinute] = ad.scheduleTime.split(':').map(Number);
            const scheduled = new Date();
            scheduled.setHours(scheduledHour, scheduledMinute, 0, 0);
            
            // ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶∏‡¶Æ‡ßü‡ßá‡¶∞ ¬±‡ßß ‡¶ò‡¶£‡ßç‡¶ü‡¶æ‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶∂‡ßã ‡¶ï‡¶∞‡¶¨‡ßá
            const timeDiff = Math.abs(now - scheduled) / (1000 * 60 * 60);
            if (timeDiff > 1) {
                canShow = false;
            }
        }
        
        // ‡¶Ø‡¶¶‡¶ø ‡¶∂‡ßã ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶ú‡¶ï‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶π‡ßü‡¶®‡¶ø
        if (canShow && !hasSeenToday) {
            document.getElementById('adLink').href = ad.link || '#';
            document.getElementById('dynamicAdText').innerText = ad.text || "‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶Ö‡¶´‡¶æ‡¶∞!";
            
            container.classList.add('show');
            
            // ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï ‡¶ï‡¶∞‡ßã ‡¶Ø‡ßá ‡¶Ü‡¶ú‡¶ï‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶π‡ßü‡ßá‡¶õ‡ßá
            localStorage.setItem(adShownKey, 'true');
            
            // ‡ßÆ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶Ö‡¶ü‡ßã ‡¶π‡¶æ‡¶á‡¶°
            setTimeout(() => {
                container.classList.remove('show');
            }, 8000);
            
        } else {
            container.classList.remove('show');
        }
        
        // ‡ß®‡ß™ ‡¶ò‡¶£‡ßç‡¶ü‡¶æ‡¶∞ ‡¶™‡ßÅ‡¶∞‡¶æ‡¶§‡¶® ‡¶è‡¶° ‡¶ï‡ßç‡¶≤‡¶ø‡¶®‡¶Ü‡¶™
        cleanupOldAds();
    });
}

// ‡¶™‡ßÅ‡¶∞‡¶æ‡¶§‡¶® ‡¶è‡¶° ‡¶°‡¶æ‡¶ü‡¶æ ‡¶ï‡ßç‡¶≤‡¶ø‡¶®‡¶Ü‡¶™
function cleanupOldAds() {
    const now = Date.now();
    const oneDayAgo = now - (24 * 60 * 60 * 1000);
    
    // localStorage ‡¶•‡ßá‡¶ï‡ßá ‡¶™‡ßÅ‡¶∞‡¶æ‡¶§‡¶® ‡¶è‡¶° ‡¶°‡¶æ‡¶ü‡¶æ ‡¶∞‡¶ø‡¶Æ‡ßÅ‡¶≠
    for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key.startsWith('ad_shown_')) {
            const parts = key.split('_');
            const adTimestamp = parseInt(parts[2]);
            
            if (adTimestamp && adTimestamp < oneDayAgo) {
                localStorage.removeItem(key);
            }
        }
    }
}

// ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶≤‡ßã‡¶°‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶®‡¶Ü‡¶™ ‡¶ö‡¶æ‡¶≤‡¶æ‡¶ì
window.addEventListener('load', cleanupOldAds);

    // ‡¶Ü‡¶™‡¶°‡ßá‡¶ü‡ßá‡¶° ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®: ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶∏‡¶π
    function loadHistory() {
        db.ref('orders').orderByChild('deviceId').equalTo(userId).on('value', snap => {
            let html = '';
            snap.forEach(c => {
                const o = c.val();
                
                // ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶£
                let paymentStatus = '‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ';
                let paymentStatusClass = 'status-Pending';
                
                if (o.payment) {
                    if (o.payment.type === 'Manual Payment') {
                        if (o.status === 'Confirmed' || o.status === 'Delivered') {
                            paymentStatus = '‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶´‡¶≤';
                            paymentStatusClass = 'status-Confirmed';
                        } else if (o.status === 'Pending_Payment') {
                            paymentStatus = '‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ö‡ßá‡¶ï ‡¶ö‡¶≤‡¶õ‡ßá';
                            paymentStatusClass = 'status-Pending_Payment';
                        } else if (o.status === 'Pending') {
                            paymentStatus = '‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ö‡ßá‡¶ï ‡¶ö‡¶≤‡¶õ‡ßá';
                            paymentStatusClass = 'status-Pending';
                        } else if (o.status === 'Canceled') {
                            paymentStatus = '‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤';
                            paymentStatusClass = 'status-Cancelled';
                        }
                    } else {
                        paymentStatus = '‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶Ö‡¶® ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø';
                        paymentStatusClass = 'status-Processing';
                    }
                }
                
                html = `
                    <div class="order-card">
                        <div class="order-head-new">
                            <span class="ord-num">#${c.key.substr(-6).toUpperCase()}</span>
                            <span class="ord-status-pill status-${o.status}">${o.status}</span>
                        </div>
                        <div class="ord-item-list">
                            ${o.items.map(i => `
                                <div class="ord-row">
                                    <img src="${i.img}" class="ord-img">
                                    <div class="ord-info-box">
                                        <span class="ord-item-name">${i.name}</span>
                                        <span class="ord-item-qty">${i.qty} x ‡ß≥${i.price}</span>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                        <div class="ord-summary-bar">
                            <div>
                                <span class="ord-total-label">‡¶∏‡¶∞‡ßç‡¶¨‡¶Æ‡ßã‡¶ü:</span>
                                <div class="ord-total-val">‡ß≥${o.total}</div>
                                <span class="ord-pay-method" style="margin-top:5px; display:block;">
                                    <span class="ord-status-pill ${paymentStatusClass}" style="font-size:0.65rem; padding:3px 8px;">
                                        ${paymentStatus}
                                    </span>
                                </span>
                            </div>
                            <div style="text-align: right">
                                <span style="font-size:0.65rem; color:#94a3b8; font-weight:600;">${o.date || ''}</span>
                            </div>
                        </div>
                    </div>
                ` + html;
            });
            document.getElementById('historyList').innerHTML = html || '<p style="text-align:center; padding:50px; color:#94a3b8;">‡¶ï‡ßã‡¶®‡ßã ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶®‡ßá‡¶á</p>';
        });
    }

    function listenChat() {
        // ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶æ‡¶≤‡¶ø‡¶ü‡¶ø
    }

    window.onload = () => {
let currentUser = localStorage.getItem('current_user') ? JSON.parse(localStorage.getItem('current_user')) : null;

// ‡¶≤‡¶ó‡¶á‡¶®/‡¶∏‡¶æ‡¶á‡¶®‡¶Ü‡¶™ ‡¶´‡¶∞‡ßç‡¶Æ ‡¶ü‡¶ó‡¶≤ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
function toggleAuthForms() {
    const loginForm = document.getElementById('login_form');
    const signupForm = document.getElementById('signup_form');
    
    if (loginForm.style.display === 'none') {
        loginForm.style.display = 'block';
        signupForm.style.display = 'none';
    } else {
        loginForm.style.display = 'none';
        signupForm.style.display = 'block';
    }
}

// ‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™ ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶æ‡¶∞
function handleSignup() {
    const name = document.getElementById('reg_name').value;
    const email = document.getElementById('reg_email').value;
    const pass = document.getElementById('reg_pass').value;
    const contactEmail = document.getElementById('reg_contact_email').value;
    const phone = document.getElementById('reg_phone').value;
    const address = document.getElementById('reg_address').value;

    if(!name || !email || !pass || !phone || !address) {
        showToast("‡¶≠‡ßÅ‡¶≤", "‡¶∏‡¶¨‡¶ó‡ßÅ‡¶≤‡ßã ‡¶ò‡¶∞ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®!", "danger");
        return;
    }

    const userData = {
        name,
        email,
        contactEmail: contactEmail || email,
        phone,
        address,
        createdAt: new Date().toLocaleString('bn-BD'),
        uid: userId
    };

    // Firebase-‡¶è ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶∏‡ßá‡¶≠
    db.ref('users/' + userId).set(userData)
        .then(() => {
            // ‡¶≤‡¶ï‡¶æ‡¶≤ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú‡ßá ‡¶∏‡ßá‡¶≠
            localStorage.setItem('current_user', JSON.stringify(userData));
            currentUser = userData;
            
            // ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶´‡¶ø‡¶≤‡ßç‡¶° ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
            document.getElementById('pNameDisp').innerText = name;
            document.getElementById('pPhoneDisp').innerText = phone;
            
            showToast("‡¶∏‡¶´‡¶≤", "‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶∏‡¶´‡¶≤ ‡¶π‡ßü‡ßá‡¶õ‡ßá!", "success");
            showSec('home');
        })
        .catch(error => {
            showToast("‡¶≠‡ßÅ‡¶≤", "‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™ ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ: " + error.message, "danger");
        });
}

// ‡¶≤‡¶ó‡¶á‡¶® ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶æ‡¶∞
function handleLogin() {
    const email = document.getElementById('login_email').value;
    const pass = document.getElementById('login_pass').value;
    
    if(!email || !pass) {
        showToast("‡¶≠‡ßÅ‡¶≤", "‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶ì ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®", "danger");
        return;
    }

    // Firebase ‡¶•‡ßá‡¶ï‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ö‡ßá‡¶ï
    db.ref('users').orderByChild('email').equalTo(email).once('value')
        .then(snapshot => {
            if(!snapshot.exists()) {
                showToast("‡¶≠‡ßÅ‡¶≤", "‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø!", "danger");
                return;
            }
            
            let userFound = false;
            snapshot.forEach(child => {
                const user = child.val();
                // Note: Production-‡¶è ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶π‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶ï‡¶∞‡¶æ ‡¶â‡¶ö‡¶ø‡¶§
                if(user.email === email) {
                    // ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶ö‡ßá‡¶ï (‡¶∏‡¶ø‡¶Æ‡ßç‡¶™‡¶≤ ‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®)
                    // Production-‡¶è Firebase Authentication ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®
                    localStorage.setItem('current_user', JSON.stringify(user));
                    currentUser = user;
                    userFound = true;
                    
                    // ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶´‡¶ø‡¶≤‡ßç‡¶° ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
                    document.getElementById('pNameDisp').innerText = user.name;
                    document.getElementById('pPhoneDisp').innerText = user.phone;
                    
                    showToast("‡¶∏‡¶´‡¶≤", "‡¶≤‡¶ó‡¶á‡¶® ‡¶∏‡¶´‡¶≤ ‡¶π‡ßü‡ßá‡¶õ‡ßá!", "success");
                    showSec('home');
                }
            });
            
            if(!userFound) {
                showToast("‡¶≠‡ßÅ‡¶≤", "‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶≠‡ßÅ‡¶≤!", "danger");
            }
        })
        .catch(error => {
            showToast("‡¶≠‡ßÅ‡¶≤", "‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ: " + error.message, "danger");
        });
}

// ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (setting.html ‡¶è ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá)
function handleLogout() {
    if(confirm("‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?")) {
        localStorage.removeItem('current_user');
        currentUser = null;
        showToast("‡¶∏‡¶´‡¶≤", "‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶∏‡¶´‡¶≤ ‡¶π‡ßü‡ßá‡¶õ‡ßá!", "success");
        showSec('home');
    }
}
        document.getElementById('displayUid').innerText = userId;
        
        db.ref('settings').on('value', (snapshot) => {
            const s = snapshot.val();
            if(s) {
                if(s.whatsapp) document.getElementById('waLink').href = "https://wa.me/" + s.whatsapp;
                if(s.call) document.getElementById('callLink').href = "tel:" + s.call;
                if(s.address) document.getElementById('displayAddress').innerText = s.address;
            }
        });
        
        checkBanStatus(); 
        updateCartUI(); 
        fetchLiveProducts(); 
        listenInbox(); 
        startAdShow();
        
        const saved = localStorage.getItem('bashkandi_user');
        if(saved) {
            const u = JSON.parse(saved);
            document.getElementById('uName').value = u.name || "";
            document.getElementById('uPhone').value = u.phone || "";
            document.getElementById('uAddress').value = u.addr || "";
            document.getElementById('profName').value = u.name || "";
            document.getElementById('profPhone').value = u.phone || "";
            document.getElementById('profAddr').value = u.addr || "";
            document.getElementById('pNameDisp').innerText = u.name || "‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞";
            document.getElementById('pPhoneDisp').innerText = u.phone || "";
        }
        
        // ‡¶≤‡ßã‡¶° ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü unread ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶ö‡ßá‡¶ï
        const unreadMessages = JSON.parse(localStorage.getItem('unread_messages') || '[]');
        if (unreadMessages.length > 0) {
            document.getElementById('inboxDot').style.display = 'block';
        }
    }

    let cur = 0; setInterval(() => { cur = (cur + 1) % 3; const wrap = document.getElementById('bannerWrapper'); if(wrap) wrap.style.transform = `translateX(-${cur * 100}%)`; }, 4500);
    function toggleCategories() {
    const catList = document.getElementById('dynamicCatList');
    const btn = document.getElementById('catToggleBtn');
    
    // ‡¶Ø‡¶¶‡¶ø ‡¶π‡¶æ‡¶á‡¶° ‡¶•‡¶æ‡¶ï‡ßá ‡¶§‡¶¨‡ßá ‡¶∂‡ßã ‡¶ï‡¶∞‡¶¨‡ßá, ‡¶Ü‡¶∞ ‡¶∂‡ßã ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶π‡¶æ‡¶á‡¶° ‡¶ï‡¶∞‡¶¨‡ßá
    if (catList.style.display === 'none' || catList.style.display === '') {
        catList.style.display = 'flex';
        btn.innerHTML = '<i class="fas fa-eye-slash"></i> ‡¶π‡¶æ‡¶á‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®';
        btn.style.color = '#ef4444'; // ‡¶π‡¶æ‡¶á‡¶° ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶¨‡¶æ‡¶ü‡¶® ‡¶≤‡¶æ‡¶≤‡¶ö‡ßá ‡¶π‡¶¨‡ßá
    } else {
        catList.style.display = 'none';
        btn.innerHTML = '<i class="fas fa-eye"></i> ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®';
        btn.style.color = '#1e293b'; // ‡¶®‡¶∞‡¶Æ‡¶æ‡¶≤ ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞
    }
}
function showTrendingBoard() {
    document.getElementById('trendingPopupBoard').style.display = 'block';
    document.getElementById('searchWrapper').style.borderColor = '#10b981';
    document.getElementById('searchIcon').style.color = '#10b981';
    searchInsideBoardOnly();
}

function hideTrendingBoard() {
    document.getElementById('trendingPopupBoard').style.display = 'none';
    document.getElementById('searchWrapper').style.borderColor = '#e2e8f0';
    document.getElementById('searchIcon').style.color = '#94a3b8';
    document.getElementById('productSearch').value = '';
    document.getElementById('closeBoardBtn').style.display = 'none';
}

function searchInsideBoardOnly() {
    const query = document.getElementById('productSearch').value.toLowerCase().trim();
    const boardArea = document.getElementById('boardProductArea');
    const closeBtn = document.getElementById('closeBoardBtn');

    closeBtn.style.display = query.length > 0 ? 'block' : 'none';

    // AI ‡¶´‡ßã‡¶®‡ßá‡¶ü‡¶ø‡¶ï ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™
    const aiMap = { 'khati': '‡¶ñ‡¶æ‡¶Å‡¶ü‡¶ø', 'modhu': '‡¶Æ‡¶ß‡ßÅ', 'ghee': '‡¶ò‡¶ø', 'tel': '‡¶§‡ßá‡¶≤' };
    let converted = query;
    Object.keys(aiMap).forEach(key => { if(query.includes(key)) converted = query.replace(key, aiMap[key]); });

    // ‡¶Æ‡ßá‡¶á‡¶® ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶•‡ßá‡¶ï‡ßá ‡¶§‡¶•‡ßç‡¶Ø ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ
    const allProducts = Array.from(document.querySelectorAll('#productGrid .card'));
    
    let filtered = allProducts;
    if(query.length > 0) {
        filtered = allProducts.filter(card => {
            const title = card.querySelector('h4').innerText.toLowerCase();
            return title.includes(query) || title.includes(converted);
        });
    }

    let html = '';
    filtered.slice(0, 10).forEach(p => {
        const title = p.querySelector('h4').innerText;
        const img = p.querySelector('img').src;
        const price = (p.querySelector('.price-row b') || p.querySelector('b')).innerText;

        // ‡¶™‡ßç‡¶∞‡¶´‡ßá‡¶∂‡¶®‡¶æ‡¶≤ ‡¶Æ‡¶ø‡¶®‡¶ø ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶®
        html += `
        <div onclick="openFromBoard('${title}')" style="display: flex; align-items: center; padding: 12px; background: #fff; border-radius: 15px; margin-bottom: 10px; border: 1px solid #f1f5f9; cursor: pointer; transition: 0.2s; box-shadow: 0 2px 5px rgba(0,0,0,0.02);">
            <img src="${img}" style="width: 55px; height: 55px; border-radius: 10px; object-fit: cover; border: 1px solid #eee;">
            <div style="margin-left: 15px; flex: 1;">
                <h5 style="margin: 0; font-size: 0.95rem; font-family: 'Hind Siliguri'; color: #334155; line-height: 1.2;">${title}</h5>
                <span style="color: #10b981; font-weight: 700; font-size: 0.85rem;">${price}</span>
            </div>
            <i class="fas fa-chevron-right" style="color: #eee; font-size: 0.8rem;"></i>
        </div>`;
    });

    boardArea.innerHTML = html || '<div style="padding:40px; text-align:center; color:#999; font-family:Hind Siliguri;">‡¶™‡¶£‡ßç‡¶Ø ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø!</div>';
}

function openFromBoard(name) {
    const mainCards = document.querySelectorAll('#productGrid .card');
    for (let card of mainCards) {
        if (card.querySelector('h4').innerText === name) {
            card.click(); // ‡¶Æ‡ßá‡¶á‡¶® ‡¶ï‡¶æ‡¶∞‡ßç‡¶°‡ßá‡¶∞ ‡¶°‡¶ø‡¶ü‡ßá‡¶á‡¶≤‡¶∏ ‡¶ì‡¶™‡ßá‡¶® ‡¶ï‡¶∞‡¶¨‡ßá
            hideTrendingBoard();
            break;
        }
    }
}
function openMenu() { // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶Ø‡¶æ‡¶á ‡¶π‡ßã‡¶ï
    hideTrendingBoard(); // ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶ñ‡ßÅ‡¶≤‡¶≤‡ßá ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶¨‡¶®‡ßç‡¶ß ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá
    // ... ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡ßá‡¶®‡ßÅ‡¶∞ ‡¶¨‡¶æ‡¶ï‡¶ø ‡¶ï‡ßã‡¶° ...
}
// ‡ßß. ‡¶≤‡¶ó‡¶á‡¶® ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶≠‡ßá‡¶∞‡¶ø‡ßü‡ßá‡¶¨‡¶≤
let currentUser = null; 

// ‡ß®. ‡¶Ö‡¶• ‡¶∏‡ßá‡¶ï‡¶∂‡¶® ‡¶ü‡¶ó‡¶≤ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
function toggleAuth(type) {
    if(type === 'signup') {
        document.getElementById('loginForm').style.display = 'none';
        document.getElementById('signupForm').style.display = 'block';
    } else {
        document.getElementById('loginForm').style.display = 'block';
        document.getElementById('signupForm').style.display = 'none';
    }
}

// ‡ß©. ‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™ ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶æ‡¶∞
function handleSignup() {
    const name = document.getElementById('regName').value;
    const email = document.getElementById('regEmail').value;
    const pass = document.getElementById('regPass').value;
    const contactEmail = document.getElementById('regContactEmail').value;
    const phone = document.getElementById('regPhone').value;
    const address = document.getElementById('regAddress').value;

    if(!name || !email || !pass || !phone || !address) {
        alert("‡¶∏‡¶¨‡¶ó‡ßÅ‡¶≤‡ßã ‡¶ò‡¶∞ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®!");
        return;
    }

    // ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶∏‡ßá ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ï‡ßã‡¶° ‡¶¨‡¶∏‡¶¨‡ßá (Firebase)
    // ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£‡¶∏‡ßç‡¶¨‡¶∞‡ßÇ‡¶™ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ö‡¶¨‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø:
    currentUser = { name, email, contactEmail, phone, address };
    alert("‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™ ‡¶∏‡¶´‡¶≤ ‡¶π‡ßü‡ßá‡¶õ‡ßá!");
    showSec('home');
}

// ‡ß™. ‡¶≤‡¶ó‡¶á‡¶® ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶æ‡¶∞
function handleLogin() {
    const email = document.getElementById('loginEmail').value;
    const pass = document.getElementById('loginPass').value;
    
    if(email && pass) {
        // ‡¶´‡¶æ‡ßü‡¶æ‡¶∞‡¶¨‡ßá‡¶∏ ‡¶≤‡¶ó‡¶á‡¶® ‡¶ö‡ßá‡¶ï ‡¶ï‡ßã‡¶° ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶π‡¶¨‡ßá
        alert("‡¶≤‡¶ó‡¶á‡¶® ‡¶∏‡¶´‡¶≤!");
        showSec('home');
    } else {
        alert("‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶ì ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®");
    }
}

</script>
<section id="authSec" class="app-section">
    <div style="padding: 25px;">
        <div id="loginForm">
            <h2 style="font-weight: 800; margin-bottom: 10px;">‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
            <p style="color: #64748b; margin-bottom: 20px;">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá ‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂ ‡¶ï‡¶∞‡¶§‡ßá ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶ì ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®‡•§</p>
            <input type="email" id="loginEmail" class="input-style" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤">
            <input type="password" id="loginPass" class="input-style" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°">
            <button onclick="handleLogin()" class="btn-action">‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            <p style="text-align: center; margin-top: 20px; font-size: 0.9rem;">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶®‡ßá‡¶á? <a href="#" onclick="toggleAuth('signup')" style="color: var(--p); font-weight: 700;">‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®</a></p>
        </div>

        <div id="signupForm" style="display: none;">
            <h2 style="font-weight: 800; margin-bottom: 10px;">‡¶®‡¶§‡ßÅ‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü</h2>
            <p style="color: #64748b; margin-bottom: 20px;">‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø‡¶ó‡ßÅ‡¶≤‡ßã ‡¶¶‡¶ø‡ßü‡ßá ‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™ ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
            <input type="text" id="regName" class="input-style" placeholder="‡¶™‡ßÅ‡¶∞‡ßã ‡¶®‡¶æ‡¶Æ">
            <input type="email" id="regEmail" class="input-style" placeholder="‡¶á‡¶Æ‡ßá‡¶á‡¶≤ (‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)">
            <input type="password" id="regPass" class="input-style" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°">
            <input type="email" id="regContactEmail" class="input-style" placeholder="‡¶ï‡¶®‡ßç‡¶ü‡¶æ‡¶ï‡ßç‡¶ü ‡¶á‡¶Æ‡ßá‡¶á‡¶≤">
            <input type="number" id="regPhone" class="input-style" placeholder="‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞">
            <textarea id="regAddress" class="input-style" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ (‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§)" style="height: 80px;"></textarea>
            <button onclick="handleSignup()" class="btn-action">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            <p style="text-align: center; margin-top: 20px; font-size: 0.9rem;">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Ü‡¶õ‡ßá? <a href="#" onclick="toggleAuth('login')" style="color: var(--p); font-weight: 700;">‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</a></p>
        </div>
    </div>
</section>

</body>
</html>